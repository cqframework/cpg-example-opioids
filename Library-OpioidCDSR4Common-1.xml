<?xml version="1.0" encoding="UTF-8"?>
<library xmlns="urn:hl7-org:elm:r1" xmlns:t="urn:hl7-org:elm-types:r1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:fhir="http://hl7.org/fhir" xmlns:qdm43="urn:healthit-gov:qdm:v4_3" xmlns:qdm53="urn:healthit-gov:qdm:v5_3" xmlns:a="urn:hl7-org:cql-annotations:r1">
   <annotation translatorOptions="EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion" signatureLevel="None" xsi:type="a:CqlToElmInfo"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation librarySystem="http://cqframework.org/cpg-example-opioids" libraryId="OpioidCDSR4Common" libraryVersion="0.1.0" startLine="74" startChar="7" endLine="74" endChar="53" message="Could not resolve membership operator for terminology target of the retrieve." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation xsi:type="a:Annotation">
      <a:s r="930">
         <a:s>library OpioidCDSR4Common version '0.1.0'</a:s>
      </a:s>
   </annotation>
   <identifier id="OpioidCDSR4Common" system="http://cqframework.org/cpg-example-opioids" version="0.1.0"/>
   <schemaIdentifier id="urn:hl7-org:elm" version="r1"/>
   <usings>
      <def localIdentifier="System" uri="urn:hl7-org:elm-types:r1"/>
      <def localId="1" locator="3:1-3:26" localIdentifier="FHIR" uri="http://hl7.org/fhir" version="4.0.0">
         <annotation xsi:type="a:Annotation">
            <a:s r="1">
               <a:s>using </a:s>
               <a:s>
                  <a:s>FHIR</a:s>
               </a:s>
               <a:s> version '4.0.0'</a:s>
            </a:s>
         </annotation>
      </def>
   </usings>
   <includes>
      <def localId="2" locator="5:1-5:54" localIdentifier="FHIRHelpers" path="http://hl7.org/fhir/FHIRHelpers" version="4.0.0">
         <annotation xsi:type="a:Annotation">
            <a:s r="2">
               <a:s>include </a:s>
               <a:s>
                  <a:s>FHIRHelpers</a:s>
               </a:s>
               <a:s> version '4.0.0' called FHIRHelpers</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="3" locator="6:1-6:50" localIdentifier="OMTKLogic" path="http://cqframework.org/cpg-example-opioids/OMTKLogic" version="0.0.0">
         <annotation xsi:type="a:Annotation">
            <a:s r="3">
               <a:s>include </a:s>
               <a:s>
                  <a:s>OMTKLogic</a:s>
               </a:s>
               <a:s> version '0.0.0' called OMTKLogic</a:s>
            </a:s>
         </annotation>
      </def>
   </includes>
   <codeSystems>
      <def localId="4" locator="8:1-8:45" name="SNOMED" id="http://snomed.info/sct" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="4">
               <a:s>codesystem &quot;SNOMED&quot;: 'http://snomed.info/sct'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="5" locator="9:1-9:114" name="Medication Request Category Codes" id="http://terminology.hl7.org/CodeSystem/medicationrequest-category" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="5">
               <a:s>codesystem &quot;Medication Request Category Codes&quot;: 'http://terminology.hl7.org/CodeSystem/medicationrequest-category'</a:s>
            </a:s>
         </annotation>
      </def>
   </codeSystems>
   <valueSets>
      <def localId="6" locator="11:1-11:90" name="Active Condition" id="http://hl7.org/fhir/uv/cpg/ValueSet/cpg-active-condition-vs" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="6">
               <a:s>valueset &quot;Active Condition&quot;: 'http://hl7.org/fhir/uv/cpg/ValueSet/cpg-active-condition-vs'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="7" locator="12:1-12:104" name="Benzodiazepines" id="http://fhir.org/guides/cdc/opioid-cds/ValueSet/benzodiazepines-medications" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="7">
               <a:s>valueset &quot;Benzodiazepines&quot;: 'http://fhir.org/guides/cdc/opioid-cds/ValueSet/benzodiazepines-medications'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="8" locator="14:1-14:106" name="End of Life Conditions" id="http://fhir.org/guides/cdc/opioid-cds/ValueSet/end-of-life-conditions" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="8">
               <a:s>// TODO: Fix this name
valueset &quot;End of Life Conditions&quot;: 'http://fhir.org/guides/cdc/opioid-cds/ValueSet/end-of-life-conditions'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="9" locator="18:1-18:100" name="Hospice Disposition" id="http://fhir.org/guides/cdc/opioid-cds/ValueSet/hospice-disposition" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="9">
               <a:s>// Harvested from VSAC - OID: 2.16.840.1.113762.1.4.1108.15
// NOTE: This harvest note is incorrect, none of the following 3 value sets contain any of the codes in the above referenced valueset
// Rob will construct an appropriate hospice value set aligned with current eCQM program usage and we will use that when available
valueset &quot;Hospice Disposition&quot;: 'http://fhir.org/guides/cdc/opioid-cds/ValueSet/hospice-disposition'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="10" locator="19:1-19:98" name="Hospice Finding Codes" id="http://fhir.org/guides/cdc/opioid-cds/ValueSet/hospice-finding" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="10">
               <a:s>valueset &quot;Hospice Finding Codes&quot;: 'http://fhir.org/guides/cdc/opioid-cds/ValueSet/hospice-finding'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="11" locator="20:1-20:102" name="Hospice Procedure Codes" id="http://fhir.org/guides/cdc/opioid-cds/ValueSet/hospice-procedure" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="11">
               <a:s>valueset &quot;Hospice Procedure Codes&quot;: 'http://fhir.org/guides/cdc/opioid-cds/ValueSet/hospice-procedure'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="12" locator="21:1-21:112" name="Illicit Drug Screening" id="http://fhir.org/guides/cdc/opioid-cds/ValueSet/illicit-drug-urine-screening" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="12">
               <a:s>valueset &quot;Illicit Drug Screening&quot;: 'http://fhir.org/guides/cdc/opioid-cds/ValueSet/illicit-drug-urine-screening'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="13" locator="23:1-23:130" name="Limited Life Expectancy Conditions" id="http://fhir.org/guides/cdc/opioid-cds/ValueSet/limited-life-expectancy-conditions" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="13">
               <a:s>// Harvested from VSAC - OID: 2.16.840.1.113883.3.526.3.1259
valueset &quot;Limited Life Expectancy Conditions&quot;: 'http://fhir.org/guides/cdc/opioid-cds/ValueSet/limited-life-expectancy-conditions'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="14" locator="24:1-24:100" name="Long Acting Opioids" id="http://fhir.org/guides/cdc/opioid-cds/ValueSet/long-acting-opioids" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="14">
               <a:s>valueset &quot;Long Acting Opioids&quot;: 'http://fhir.org/guides/cdc/opioid-cds/ValueSet/long-acting-opioids'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="15" locator="25:1-25:90" name="Naloxone" id="http://fhir.org/guides/cdc/opioid-cds/ValueSet/naloxone-medications" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="15">
               <a:s>valueset &quot;Naloxone&quot;: 'http://fhir.org/guides/cdc/opioid-cds/ValueSet/naloxone-medications'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="16" locator="26:1-26:100" name="Risk Assessment" id="http://fhir.org/guides/cdc/opioid-cds/ValueSet/opioid-abuse-assessment" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="16">
               <a:s>valueset &quot;Risk Assessment&quot;: 'http://fhir.org/guides/cdc/opioid-cds/ValueSet/opioid-abuse-assessment'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="17" locator="27:1-27:105" name="Opioid Drug Screening" id="http://fhir.org/guides/cdc/opioid-cds/ValueSet/opioid-urine-screening" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="17">
               <a:s>valueset &quot;Opioid Drug Screening&quot;: 'http://fhir.org/guides/cdc/opioid-cds/ValueSet/opioid-urine-screening'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="18" locator="28:1-28:129" name="Ambulatory Abuse Potential Opioids" id="http://fhir.org/guides/cdc/opioid-cds/ValueSet/opioids-abused-in-ambulatory-care" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="18">
               <a:s>valueset &quot;Ambulatory Abuse Potential Opioids&quot;: 'http://fhir.org/guides/cdc/opioid-cds/ValueSet/opioids-abused-in-ambulatory-care'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="19" locator="29:1-29:92" name="Substance Abuse" id="http://fhir.org/guides/cdc/opioid-cds/ValueSet/substance-abuse" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="19">
               <a:s>valueset &quot;Substance Abuse&quot;: 'http://fhir.org/guides/cdc/opioid-cds/ValueSet/substance-abuse'</a:s>
            </a:s>
         </annotation>
      </def>
   </valueSets>
   <codes>
      <def localId="21" locator="32:1-32:53" name="Referral to Hospice" id="306205009" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="21">
               <a:s>// TODO: Turn this into a valueset
code &quot;Referral to Hospice&quot;: '306205009' from </a:s>
               <a:s r="20">
                  <a:s>&quot;SNOMED&quot;</a:s>
               </a:s>
            </a:s>
         </annotation>
         <codeSystem localId="20" locator="32:46-32:53" name="SNOMED"/>
      </def>
      <def localId="23" locator="34:1-34:72" name="Outpatient" id="outpatient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="23">
               <a:s>// TODO: Turn this into a valueset
code &quot;Outpatient&quot;: 'outpatient' from </a:s>
               <a:s r="22">
                  <a:s>&quot;Medication Request Category Codes&quot;</a:s>
               </a:s>
            </a:s>
         </annotation>
         <codeSystem localId="22" locator="34:38-34:72" name="Medication Request Category Codes"/>
      </def>
   </codes>
   <statements>
      <def localId="25" locator="37:1-37:29" name="IsForChronicPain" context="Unfiltered" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="25">
               <a:s r="24">// TODO: Capture process decisions for long-term opioid use
define IsForChronicPain: true</a:s>
            </a:s>
         </annotation>
         <expression localId="24" locator="37:26-37:29" valueType="t:Boolean" value="true" xsi:type="Literal"/>
      </def>
      <def localId="913" locator="238:1-239:27" name="ToCodes" context="Unfiltered" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="913">
               <a:s>define function ToCodes(coding List&lt;FHIR.Coding>):
  </a:s>
               <a:s r="912">
                  <a:s r="912">
                     <a:s>
                        <a:s r="908">
                           <a:s r="907">
                              <a:s>
                                 <a:s>coding</a:s>
                              </a:s>
                           </a:s>
                           <a:s> c</a:s>
                        </a:s>
                     </a:s>
                     <a:s> </a:s>
                     <a:s r="911">
                        <a:s>return </a:s>
                        <a:s r="910">
                           <a:s>ToCode(</a:s>
                           <a:s r="909">
                              <a:s>c</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="912" locator="239:3-239:27" xsi:type="Query">
            <source localId="908" locator="239:3-239:10" alias="c">
               <expression localId="907" locator="239:3-239:8" name="coding" xsi:type="OperandRef"/>
            </source>
            <return localId="911" locator="239:12-239:27">
               <expression localId="910" locator="239:19-239:27" name="ToCode" xsi:type="FunctionRef">
                  <operand localId="909" locator="239:26" name="c" xsi:type="AliasRef"/>
               </expression>
            </return>
         </expression>
         <operand name="coding">
            <operandTypeSpecifier localId="36" locator="238:32-238:48" xsi:type="ListTypeSpecifier">
               <elementType localId="35" locator="238:37-238:47" name="fhir:Coding" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="906" locator="230:1-236:3" name="ToCode" context="Unfiltered" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="906">
               <a:s>/*
*  Conversion Functions
*/

define function ToCode(coding FHIR.Coding):
  </a:s>
               <a:s r="905">
                  <a:s r="905">
                     <a:s>System.Code {
    </a:s>
                     <a:s>
                        <a:s>code: </a:s>
                        <a:s r="895">
                           <a:s r="894">
                              <a:s r="893">
                                 <a:s>coding</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="894">
                                 <a:s>code</a:s>
                              </a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="895">
                              <a:s>value</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>,
    </a:s>
                     <a:s>
                        <a:s>system: </a:s>
                        <a:s r="898">
                           <a:s r="897">
                              <a:s r="896">
                                 <a:s>coding</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="897">
                                 <a:s>system</a:s>
                              </a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="898">
                              <a:s>value</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>,
    </a:s>
                     <a:s>
                        <a:s>version: </a:s>
                        <a:s r="901">
                           <a:s r="900">
                              <a:s r="899">
                                 <a:s>coding</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="900">
                                 <a:s>version</a:s>
                              </a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="901">
                              <a:s>value</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>,
    </a:s>
                     <a:s>
                        <a:s>display: </a:s>
                        <a:s r="904">
                           <a:s r="903">
                              <a:s r="902">
                                 <a:s>coding</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="903">
                                 <a:s>display</a:s>
                              </a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="904">
                              <a:s>value</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  }</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="905" locator="231:3-236:3" classType="t:Code" xsi:type="Instance">
            <element name="code">
               <value localId="895" locator="232:11-232:27" path="value" xsi:type="Property">
                  <source localId="894" locator="232:11-232:21" path="code" xsi:type="Property">
                     <source localId="893" locator="232:11-232:16" name="coding" xsi:type="OperandRef"/>
                  </source>
               </value>
            </element>
            <element name="system">
               <value localId="898" locator="233:13-233:31" path="value" xsi:type="Property">
                  <source localId="897" locator="233:13-233:25" path="system" xsi:type="Property">
                     <source localId="896" locator="233:13-233:18" name="coding" xsi:type="OperandRef"/>
                  </source>
               </value>
            </element>
            <element name="version">
               <value localId="901" locator="234:14-234:33" path="value" xsi:type="Property">
                  <source localId="900" locator="234:14-234:27" path="version" xsi:type="Property">
                     <source localId="899" locator="234:14-234:19" name="coding" xsi:type="OperandRef"/>
                  </source>
               </value>
            </element>
            <element name="display">
               <value localId="904" locator="235:14-235:33" path="value" xsi:type="Property">
                  <source localId="903" locator="235:14-235:27" path="display" xsi:type="Property">
                     <source localId="902" locator="235:14-235:19" name="coding" xsi:type="OperandRef"/>
                  </source>
               </value>
            </element>
         </expression>
         <operand name="coding">
            <operandTypeSpecifier localId="40" locator="230:31-230:41" name="fhir:Coding" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="62" locator="39:1-42:59" name="Active Ambulatory Opioid Rx" context="Unfiltered" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="62">
               <a:s>define &quot;Active Ambulatory Opioid Rx&quot;:
  </a:s>
               <a:s r="61">
                  <a:s>
                     <a:s r="27">
                        <a:s r="26">
                           <a:s r="26">
                              <a:s>[MedicationRequest: </a:s>
                              <a:s>
                                 <a:s>&quot;Ambulatory Abuse Potential Opioids&quot;</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> Rx</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="60">
                     <a:s>where </a:s>
                     <a:s r="60">
                        <a:s r="31">
                           <a:s r="29">
                              <a:s r="28">
                                 <a:s>Rx</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="29">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> = </a:s>
                           <a:s r="30">
                              <a:s>'active'</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      and </a:s>
                        <a:s r="59">
                           <a:s r="57">
                              <a:s>ToCodes(</a:s>
                              <a:s r="34">
                                 <a:s r="33">
                                    <a:s r="32">
                                       <a:s>Rx</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="33">
                                       <a:s>category</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="34">
                                    <a:s>coding</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s> contains </a:s>
                           <a:s r="58">
                              <a:s>&quot;Outpatient&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="61" locator="40:3-42:59" xsi:type="Query">
            <source localId="27" locator="40:3-40:62" alias="Rx">
               <expression localId="26" locator="40:3-40:59" xsi:type="Union">
                  <operand dataType="fhir:MedicationRequest" codeProperty="medication" codeComparator="in" xsi:type="Retrieve">
                     <codes locator="40:23-40:58" name="Ambulatory Abuse Potential Opioids" preserve="true" xsi:type="ValueSetRef"/>
                  </operand>
                  <operand locator="40:3-40:59" xsi:type="Query">
                     <source locator="40:3-40:59" alias="MR">
                        <expression dataType="fhir:MedicationRequest" xsi:type="Retrieve"/>
                     </source>
                     <relationship locator="40:3-40:59" alias="M" xsi:type="With">
                        <expression dataType="fhir:Medication" xsi:type="Retrieve"/>
                        <suchThat xsi:type="And">
                           <operand xsi:type="Equal">
                              <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand path="id" scope="M" xsi:type="Property"/>
                              </operand>
                              <operand xsi:type="Last">
                                 <source xsi:type="Split">
                                    <stringToSplit name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand path="medication.reference" scope="MR" xsi:type="Property"/>
                                    </stringToSplit>
                                    <separator valueType="t:String" value="/" xsi:type="Literal"/>
                                 </source>
                              </operand>
                           </operand>
                           <operand xsi:type="InValueSet">
                              <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand path="code" xsi:type="Property"/>
                              </code>
                              <valueset locator="40:23-40:58" name="Ambulatory Abuse Potential Opioids" preserve="true"/>
                           </operand>
                        </suchThat>
                     </relationship>
                  </operand>
               </expression>
            </source>
            <where localId="60" locator="41:5-42:59" xsi:type="And">
               <operand localId="31" locator="41:11-41:30" xsi:type="Equal">
                  <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="29" locator="41:11-41:19" path="status" scope="Rx" xsi:type="Property"/>
                  </operand>
                  <operand localId="30" locator="41:23-41:30" valueType="t:String" value="active" xsi:type="Literal"/>
               </operand>
               <operand localId="59" locator="42:11-42:59" xsi:type="Contains">
                  <operand localId="57" locator="42:11-42:37" name="ToCodes" xsi:type="FunctionRef">
                     <operand localId="34" locator="42:19-42:36" xsi:type="Flatten">
                        <operand xsi:type="Query">
                           <source alias="$this">
                              <expression localId="33" locator="42:19-42:29" path="category" scope="Rx" xsi:type="Property"/>
                           </source>
                           <where xsi:type="Not">
                              <operand xsi:type="IsNull">
                                 <operand path="coding" xsi:type="Property">
                                    <source name="$this" xsi:type="AliasRef"/>
                                 </operand>
                              </operand>
                           </where>
                           <return distinct="false">
                              <expression path="coding" xsi:type="Property">
                                 <source name="$this" xsi:type="AliasRef"/>
                              </expression>
                           </return>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="58" locator="42:48-42:59" name="Outpatient" xsi:type="CodeRef"/>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="77" locator="44:1-47:59" name="Active Ambulatory Benzodiazepine Rx" context="Unfiltered" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="77">
               <a:s>define &quot;Active Ambulatory Benzodiazepine Rx&quot;:
  </a:s>
               <a:s r="76">
                  <a:s>
                     <a:s r="64">
                        <a:s r="63">
                           <a:s r="63">
                              <a:s>[MedicationRequest: </a:s>
                              <a:s>
                                 <a:s>&quot;Benzodiazepines&quot;</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> Rx</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="75">
                     <a:s>where </a:s>
                     <a:s r="75">
                        <a:s r="68">
                           <a:s r="66">
                              <a:s r="65">
                                 <a:s>Rx</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="66">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> = </a:s>
                           <a:s r="67">
                              <a:s>'active'</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      and </a:s>
                        <a:s r="74">
                           <a:s r="72">
                              <a:s>ToCodes(</a:s>
                              <a:s r="71">
                                 <a:s r="70">
                                    <a:s r="69">
                                       <a:s>Rx</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="70">
                                       <a:s>category</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="71">
                                    <a:s>coding</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s> contains </a:s>
                           <a:s r="73">
                              <a:s>&quot;Outpatient&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="76" locator="45:3-47:59" xsi:type="Query">
            <source localId="64" locator="45:3-45:43" alias="Rx">
               <expression localId="63" locator="45:3-45:40" xsi:type="Union">
                  <operand dataType="fhir:MedicationRequest" codeProperty="medication" codeComparator="in" xsi:type="Retrieve">
                     <codes locator="45:23-45:39" name="Benzodiazepines" preserve="true" xsi:type="ValueSetRef"/>
                  </operand>
                  <operand locator="45:3-45:40" xsi:type="Query">
                     <source locator="45:3-45:40" alias="MR">
                        <expression dataType="fhir:MedicationRequest" xsi:type="Retrieve"/>
                     </source>
                     <relationship locator="45:3-45:40" alias="M" xsi:type="With">
                        <expression dataType="fhir:Medication" xsi:type="Retrieve"/>
                        <suchThat xsi:type="And">
                           <operand xsi:type="Equal">
                              <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand path="id" scope="M" xsi:type="Property"/>
                              </operand>
                              <operand xsi:type="Last">
                                 <source xsi:type="Split">
                                    <stringToSplit name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand path="medication.reference" scope="MR" xsi:type="Property"/>
                                    </stringToSplit>
                                    <separator valueType="t:String" value="/" xsi:type="Literal"/>
                                 </source>
                              </operand>
                           </operand>
                           <operand xsi:type="InValueSet">
                              <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand path="code" xsi:type="Property"/>
                              </code>
                              <valueset locator="45:23-45:39" name="Benzodiazepines" preserve="true"/>
                           </operand>
                        </suchThat>
                     </relationship>
                  </operand>
               </expression>
            </source>
            <where localId="75" locator="46:5-47:59" xsi:type="And">
               <operand localId="68" locator="46:11-46:30" xsi:type="Equal">
                  <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="66" locator="46:11-46:19" path="status" scope="Rx" xsi:type="Property"/>
                  </operand>
                  <operand localId="67" locator="46:23-46:30" valueType="t:String" value="active" xsi:type="Literal"/>
               </operand>
               <operand localId="74" locator="47:11-47:59" xsi:type="Contains">
                  <operand localId="72" locator="47:11-47:37" name="ToCodes" xsi:type="FunctionRef">
                     <operand localId="71" locator="47:19-47:36" xsi:type="Flatten">
                        <operand xsi:type="Query">
                           <source alias="$this">
                              <expression localId="70" locator="47:19-47:29" path="category" scope="Rx" xsi:type="Property"/>
                           </source>
                           <where xsi:type="Not">
                              <operand xsi:type="IsNull">
                                 <operand path="coding" xsi:type="Property">
                                    <source name="$this" xsi:type="AliasRef"/>
                                 </operand>
                              </operand>
                           </where>
                           <return distinct="false">
                              <expression path="coding" xsi:type="Property">
                                 <source name="$this" xsi:type="AliasRef"/>
                              </expression>
                           </return>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="73" locator="47:48-47:59" name="Outpatient" xsi:type="CodeRef"/>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="92" locator="49:1-52:59" name="Active Ambulatory Naloxone Rx" context="Unfiltered" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="92">
               <a:s>define &quot;Active Ambulatory Naloxone Rx&quot;:
  </a:s>
               <a:s r="91">
                  <a:s>
                     <a:s r="79">
                        <a:s r="78">
                           <a:s r="78">
                              <a:s>[MedicationRequest: </a:s>
                              <a:s>
                                 <a:s>&quot;Naloxone&quot;</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> Rx</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="90">
                     <a:s>where </a:s>
                     <a:s r="90">
                        <a:s r="83">
                           <a:s r="81">
                              <a:s r="80">
                                 <a:s>Rx</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="81">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> = </a:s>
                           <a:s r="82">
                              <a:s>'active'</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      and </a:s>
                        <a:s r="89">
                           <a:s r="87">
                              <a:s>ToCodes(</a:s>
                              <a:s r="86">
                                 <a:s r="85">
                                    <a:s r="84">
                                       <a:s>Rx</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="85">
                                       <a:s>category</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="86">
                                    <a:s>coding</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s> contains </a:s>
                           <a:s r="88">
                              <a:s>&quot;Outpatient&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="91" locator="50:3-52:59" xsi:type="Query">
            <source localId="79" locator="50:3-50:36" alias="Rx">
               <expression localId="78" locator="50:3-50:33" xsi:type="Union">
                  <operand dataType="fhir:MedicationRequest" codeProperty="medication" codeComparator="in" xsi:type="Retrieve">
                     <codes locator="50:23-50:32" name="Naloxone" preserve="true" xsi:type="ValueSetRef"/>
                  </operand>
                  <operand locator="50:3-50:33" xsi:type="Query">
                     <source locator="50:3-50:33" alias="MR">
                        <expression dataType="fhir:MedicationRequest" xsi:type="Retrieve"/>
                     </source>
                     <relationship locator="50:3-50:33" alias="M" xsi:type="With">
                        <expression dataType="fhir:Medication" xsi:type="Retrieve"/>
                        <suchThat xsi:type="And">
                           <operand xsi:type="Equal">
                              <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand path="id" scope="M" xsi:type="Property"/>
                              </operand>
                              <operand xsi:type="Last">
                                 <source xsi:type="Split">
                                    <stringToSplit name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand path="medication.reference" scope="MR" xsi:type="Property"/>
                                    </stringToSplit>
                                    <separator valueType="t:String" value="/" xsi:type="Literal"/>
                                 </source>
                              </operand>
                           </operand>
                           <operand xsi:type="InValueSet">
                              <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand path="code" xsi:type="Property"/>
                              </code>
                              <valueset locator="50:23-50:32" name="Naloxone" preserve="true"/>
                           </operand>
                        </suchThat>
                     </relationship>
                  </operand>
               </expression>
            </source>
            <where localId="90" locator="51:5-52:59" xsi:type="And">
               <operand localId="83" locator="51:11-51:30" xsi:type="Equal">
                  <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="81" locator="51:11-51:19" path="status" scope="Rx" xsi:type="Property"/>
                  </operand>
                  <operand localId="82" locator="51:23-51:30" valueType="t:String" value="active" xsi:type="Literal"/>
               </operand>
               <operand localId="89" locator="52:11-52:59" xsi:type="Contains">
                  <operand localId="87" locator="52:11-52:37" name="ToCodes" xsi:type="FunctionRef">
                     <operand localId="86" locator="52:19-52:36" xsi:type="Flatten">
                        <operand xsi:type="Query">
                           <source alias="$this">
                              <expression localId="85" locator="52:19-52:29" path="category" scope="Rx" xsi:type="Property"/>
                           </source>
                           <where xsi:type="Not">
                              <operand xsi:type="IsNull">
                                 <operand path="coding" xsi:type="Property">
                                    <source name="$this" xsi:type="AliasRef"/>
                                 </operand>
                              </operand>
                           </where>
                           <return distinct="false">
                              <expression path="coding" xsi:type="Property">
                                 <source name="$this" xsi:type="AliasRef"/>
                              </expression>
                           </return>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="88" locator="52:48-52:59" name="Outpatient" xsi:type="CodeRef"/>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="102" locator="54:1-56:61" name="Ambulatory Opioid Rx" context="Unfiltered" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="102">
               <a:s>define &quot;Ambulatory Opioid Rx&quot;:
  </a:s>
               <a:s r="101">
                  <a:s>
                     <a:s r="94">
                        <a:s r="93">
                           <a:s r="93">
                              <a:s>[MedicationRequest: </a:s>
                              <a:s>
                                 <a:s>&quot;Ambulatory Abuse Potential Opioids&quot;</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> Rx</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
      </a:s>
                  <a:s r="100">
                     <a:s>where </a:s>
                     <a:s r="100">
                        <a:s r="98">
                           <a:s>ToCodes(</a:s>
                           <a:s r="97">
                              <a:s r="96">
                                 <a:s r="95">
                                    <a:s>Rx</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="96">
                                    <a:s>category</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="97">
                                 <a:s>coding</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> contains </a:s>
                        <a:s r="99">
                           <a:s>&quot;Outpatient&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="101" locator="55:3-56:61" xsi:type="Query">
            <source localId="94" locator="55:3-55:62" alias="Rx">
               <expression localId="93" locator="55:3-55:59" xsi:type="Union">
                  <operand dataType="fhir:MedicationRequest" codeProperty="medication" codeComparator="in" xsi:type="Retrieve">
                     <codes locator="55:23-55:58" name="Ambulatory Abuse Potential Opioids" preserve="true" xsi:type="ValueSetRef"/>
                  </operand>
                  <operand locator="55:3-55:59" xsi:type="Query">
                     <source locator="55:3-55:59" alias="MR">
                        <expression dataType="fhir:MedicationRequest" xsi:type="Retrieve"/>
                     </source>
                     <relationship locator="55:3-55:59" alias="M" xsi:type="With">
                        <expression dataType="fhir:Medication" xsi:type="Retrieve"/>
                        <suchThat xsi:type="And">
                           <operand xsi:type="Equal">
                              <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand path="id" scope="M" xsi:type="Property"/>
                              </operand>
                              <operand xsi:type="Last">
                                 <source xsi:type="Split">
                                    <stringToSplit name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand path="medication.reference" scope="MR" xsi:type="Property"/>
                                    </stringToSplit>
                                    <separator valueType="t:String" value="/" xsi:type="Literal"/>
                                 </source>
                              </operand>
                           </operand>
                           <operand xsi:type="InValueSet">
                              <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand path="code" xsi:type="Property"/>
                              </code>
                              <valueset locator="55:23-55:58" name="Ambulatory Abuse Potential Opioids" preserve="true"/>
                           </operand>
                        </suchThat>
                     </relationship>
                  </operand>
               </expression>
            </source>
            <where localId="100" locator="56:7-56:61" xsi:type="Contains">
               <operand localId="98" locator="56:13-56:39" name="ToCodes" xsi:type="FunctionRef">
                  <operand localId="97" locator="56:21-56:38" xsi:type="Flatten">
                     <operand xsi:type="Query">
                        <source alias="$this">
                           <expression localId="96" locator="56:21-56:31" path="category" scope="Rx" xsi:type="Property"/>
                        </source>
                        <where xsi:type="Not">
                           <operand xsi:type="IsNull">
                              <operand path="coding" xsi:type="Property">
                                 <source name="$this" xsi:type="AliasRef"/>
                              </operand>
                           </operand>
                        </where>
                        <return distinct="false">
                           <expression path="coding" xsi:type="Property">
                              <source name="$this" xsi:type="AliasRef"/>
                           </expression>
                        </return>
                     </operand>
                  </operand>
               </operand>
               <operand localId="99" locator="56:50-56:61" name="Outpatient" xsi:type="CodeRef"/>
            </where>
         </expression>
      </def>
      <def localId="199" locator="58:1-104:3" name="End of Life Assessment" context="Unfiltered" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="199">
               <a:s>define &quot;End of Life Assessment&quot;:
  // 1. Conditions indicating end of life or with limited life expectancy
  </a:s>
               <a:s r="198">
                  <a:s r="118">
                     <a:s>exists </a:s>
                     <a:s r="117">
                        <a:s>(
    </a:s>
                        <a:s r="117">
                           <a:s r="109">
                              <a:s>(
      </a:s>
                              <a:s r="109">
                                 <a:s>
                                    <a:s r="104">
                                       <a:s r="103">
                                          <a:s r="103">
                                             <a:s>[Condition: </a:s>
                                             <a:s>
                                                <a:s>&quot;End of Life Conditions&quot;</a:s>
                                             </a:s>
                                             <a:s>]</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> C</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
        </a:s>
                                 <a:s r="108">
                                    <a:s>where </a:s>
                                    <a:s r="108">
                                       <a:s r="106">
                                          <a:s r="105">
                                             <a:s>C</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="106">
                                             <a:s>clinicalStatus</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> in </a:s>
                                       <a:s r="107">
                                          <a:s>&quot;Active Condition&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    )</a:s>
                           </a:s>
                           <a:s>
    union
    </a:s>
                           <a:s r="116">
                              <a:s>(
      </a:s>
                              <a:s r="116">
                                 <a:s>
                                    <a:s r="111">
                                       <a:s r="110">
                                          <a:s r="110">
                                             <a:s>[Condition: </a:s>
                                             <a:s>
                                                <a:s>code</a:s>
                                             </a:s>
                                             <a:s> in </a:s>
                                             <a:s>
                                                <a:s>&quot;Limited Life Expectancy Conditions&quot;</a:s>
                                             </a:s>
                                             <a:s>]</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> C</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
        </a:s>
                                 <a:s r="115">
                                    <a:s>where </a:s>
                                    <a:s r="115">
                                       <a:s r="113">
                                          <a:s r="112">
                                             <a:s>C</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="113">
                                             <a:s>clinicalStatus</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> in </a:s>
                                       <a:s r="114">
                                          <a:s>&quot;Active Condition&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    )</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  )</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  // 2. Admitted/referred/discharged to hospice care
  or </a:s>
                  <a:s r="197">
                     <a:s>exists </a:s>
                     <a:s r="196">
                        <a:s>(
    </a:s>
                        <a:s r="196">
                           <a:s r="163">
                              <a:s r="150">
                                 <a:s r="137">
                                    <a:s r="127">
                                       <a:s>(
      </a:s>
                                       <a:s r="127">
                                          <a:s>
                                             <a:s r="120">
                                                <a:s r="119">
                                                   <a:s r="119">
                                                      <a:s>[ServiceRequest: </a:s>
                                                      <a:s>
                                                         <a:s>code</a:s>
                                                      </a:s>
                                                      <a:s> in </a:s>
                                                      <a:s>
                                                         <a:s>&quot;Referral to Hospice&quot;</a:s>
                                                      </a:s>
                                                      <a:s>]</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> RR</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>
        </a:s>
                                          <a:s r="126">
                                             <a:s>where </a:s>
                                             <a:s r="126">
                                                <a:s r="122">
                                                   <a:s r="121">
                                                      <a:s>RR</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="122">
                                                      <a:s>status</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> in </a:s>
                                                <a:s r="125">
                                                   <a:s>{ </a:s>
                                                   <a:s r="123">
                                                      <a:s>'active'</a:s>
                                                   </a:s>
                                                   <a:s>, </a:s>
                                                   <a:s r="124">
                                                      <a:s>'completed'</a:s>
                                                   </a:s>
                                                   <a:s> }</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>
    )</a:s>
                                    </a:s>
                                    <a:s>
    union
    </a:s>
                                    <a:s r="136">
                                       <a:s>(
      </a:s>
                                       <a:s r="136">
                                          <a:s>
                                             <a:s r="129">
                                                <a:s r="128">
                                                   <a:s r="128">
                                                      <a:s>[ServiceRequest: </a:s>
                                                      <a:s>
                                                         <a:s>code</a:s>
                                                      </a:s>
                                                      <a:s> in </a:s>
                                                      <a:s>
                                                         <a:s>&quot;Hospice Procedure Codes&quot;</a:s>
                                                      </a:s>
                                                      <a:s>]</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> P</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>
        </a:s>
                                          <a:s r="135">
                                             <a:s>where </a:s>
                                             <a:s r="135">
                                                <a:s r="131">
                                                   <a:s r="130">
                                                      <a:s>P</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="131">
                                                      <a:s>status</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> in </a:s>
                                                <a:s r="134">
                                                   <a:s>{ </a:s>
                                                   <a:s r="132">
                                                      <a:s>'in-progress'</a:s>
                                                   </a:s>
                                                   <a:s>, </a:s>
                                                   <a:s r="133">
                                                      <a:s>'completed'</a:s>
                                                   </a:s>
                                                   <a:s> }</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>
    )</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    union
    </a:s>
                                 <a:s r="149">
                                    <a:s>(
      </a:s>
                                    <a:s r="149">
                                       <a:s>
                                          <a:s r="139">
                                             <a:s r="138">
                                                <a:s r="138">
                                                   <a:s>[ServiceRequest: </a:s>
                                                   <a:s>
                                                      <a:s>code</a:s>
                                                   </a:s>
                                                   <a:s> in </a:s>
                                                   <a:s>
                                                      <a:s>&quot;Hospice Procedure Codes&quot;</a:s>
                                                   </a:s>
                                                   <a:s>]</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> E</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>
        </a:s>
                                       <a:s r="148">
                                          <a:s>where </a:s>
                                          <a:s r="148">
                                             <a:s r="141">
                                                <a:s r="140">
                                                   <a:s>E</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="141">
                                                   <a:s>status</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> in </a:s>
                                             <a:s r="147">
                                                <a:s>{ </a:s>
                                                <a:s r="142">
                                                   <a:s>'planned'</a:s>
                                                </a:s>
                                                <a:s>, </a:s>
                                                <a:s r="143">
                                                   <a:s>'arrived'</a:s>
                                                </a:s>
                                                <a:s>, </a:s>
                                                <a:s r="144">
                                                   <a:s>'in-progress'</a:s>
                                                </a:s>
                                                <a:s>, </a:s>
                                                <a:s r="145">
                                                   <a:s>'finished'</a:s>
                                                </a:s>
                                                <a:s>, </a:s>
                                                <a:s r="146">
                                                   <a:s>'onleave'</a:s>
                                                </a:s>
                                                <a:s> }</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>
    )</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    union
    </a:s>
                              <a:s r="161">
                                 <a:s>(
      </a:s>
                                 <a:s r="161">
                                    <a:s>
                                       <a:s r="152">
                                          <a:s r="151">
                                             <a:s r="151">
                                                <a:s>[Observation: </a:s>
                                                <a:s>
                                                   <a:s>code</a:s>
                                                </a:s>
                                                <a:s> in </a:s>
                                                <a:s>
                                                   <a:s>&quot;Hospice Finding Codes&quot;</a:s>
                                                </a:s>
                                                <a:s>]</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> O</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>
        </a:s>
                                    <a:s r="160">
                                       <a:s>where </a:s>
                                       <a:s r="160">
                                          <a:s>not </a:s>
                                          <a:s r="159">
                                             <a:s>(</a:s>
                                             <a:s r="159">
                                                <a:s r="154">
                                                   <a:s r="153">
                                                      <a:s>O</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="154">
                                                      <a:s>status</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> in </a:s>
                                                <a:s r="158">
                                                   <a:s>{ </a:s>
                                                   <a:s r="155">
                                                      <a:s>'unknown'</a:s>
                                                   </a:s>
                                                   <a:s>, </a:s>
                                                   <a:s r="156">
                                                      <a:s>'entered-in-error'</a:s>
                                                   </a:s>
                                                   <a:s>, </a:s>
                                                   <a:s r="157">
                                                      <a:s>'cancelled'</a:s>
                                                   </a:s>
                                                   <a:s> }</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>)</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    )</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
    union
    </a:s>
                           <a:s r="195">
                              <a:s>(
      </a:s>
                              <a:s r="195">
                                 <a:s>
                                    <a:s r="165">
                                       <a:s r="164">
                                          <a:s r="164">
                                             <a:s>[Encounter]</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> E</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
        </a:s>
                                 <a:s r="194">
                                    <a:s>where
          </a:s>
                                    <a:s r="194">
                                       <a:s r="184">
                                          <a:s>(
            </a:s>
                                          <a:s r="184">
                                             <a:s>if </a:s>
                                             <a:s r="177">
                                                <a:s r="170">
                                                   <a:s r="169">
                                                      <a:s r="168">
                                                         <a:s r="167">
                                                            <a:s r="166">
                                                               <a:s>E</a:s>
                                                            </a:s>
                                                            <a:s>.</a:s>
                                                            <a:s r="167">
                                                               <a:s>hospitalization</a:s>
                                                            </a:s>
                                                         </a:s>
                                                         <a:s>.</a:s>
                                                         <a:s r="168">
                                                            <a:s>dischargeDisposition</a:s>
                                                         </a:s>
                                                      </a:s>
                                                      <a:s>.</a:s>
                                                      <a:s r="169">
                                                         <a:s>coding</a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s> is null</a:s>
                                                </a:s>
                                                <a:s>
                or </a:s>
                                                <a:s r="176">
                                                   <a:s>not </a:s>
                                                   <a:s r="175">
                                                      <a:s>exists </a:s>
                                                      <a:s r="174">
                                                         <a:s>(</a:s>
                                                         <a:s r="174">
                                                            <a:s r="173">
                                                               <a:s r="172">
                                                                  <a:s r="171">
                                                                     <a:s>E</a:s>
                                                                  </a:s>
                                                                  <a:s>.</a:s>
                                                                  <a:s r="172">
                                                                     <a:s>hospitalization</a:s>
                                                                  </a:s>
                                                               </a:s>
                                                               <a:s>.</a:s>
                                                               <a:s r="173">
                                                                  <a:s>dischargeDisposition</a:s>
                                                               </a:s>
                                                            </a:s>
                                                            <a:s>.</a:s>
                                                            <a:s r="174">
                                                               <a:s>coding</a:s>
                                                            </a:s>
                                                         </a:s>
                                                         <a:s>)</a:s>
                                                      </a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s r="178">
              then false
            else </a:s>
                                             <a:s r="183">
                                                <a:s r="181">
                                                   <a:s r="180">
                                                      <a:s r="179">
                                                         <a:s>E</a:s>
                                                      </a:s>
                                                      <a:s>.</a:s>
                                                      <a:s r="180">
                                                         <a:s>hospitalization</a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="181">
                                                      <a:s>dischargeDisposition</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> in </a:s>
                                                <a:s r="182">
                                                   <a:s>&quot;Hospice Disposition&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>
          )</a:s>
                                       </a:s>
                                       <a:s>
          and </a:s>
                                       <a:s r="193">
                                          <a:s r="186">
                                             <a:s r="185">
                                                <a:s>E</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="186">
                                                <a:s>status</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> in </a:s>
                                          <a:s r="192">
                                             <a:s>{ </a:s>
                                             <a:s r="187">
                                                <a:s>'planned'</a:s>
                                             </a:s>
                                             <a:s>, </a:s>
                                             <a:s r="188">
                                                <a:s>'arrived'</a:s>
                                             </a:s>
                                             <a:s>, </a:s>
                                             <a:s r="189">
                                                <a:s>'in-progress'</a:s>
                                             </a:s>
                                             <a:s>, </a:s>
                                             <a:s r="190">
                                                <a:s>'finished'</a:s>
                                             </a:s>
                                             <a:s>, </a:s>
                                             <a:s r="191">
                                                <a:s>'onleave'</a:s>
                                             </a:s>
                                             <a:s> }</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    )</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  )</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="198" locator="60:3-104:3" xsi:type="Or">
            <operand localId="118" locator="60:3-70:3" xsi:type="Exists">
               <operand localId="117" locator="60:10-70:3" xsi:type="Union">
                  <operand localId="109" locator="61:5-64:5" xsi:type="Query">
                     <source localId="104" locator="62:7-62:45" alias="C">
                        <expression localId="103" locator="62:7-62:43" dataType="fhir:Condition" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                           <codes locator="62:19-62:42" name="End of Life Conditions" preserve="true" xsi:type="ValueSetRef"/>
                        </expression>
                     </source>
                     <where localId="108" locator="63:9-63:52" xsi:type="InValueSet">
                        <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="106" locator="63:15-63:30" path="clinicalStatus" scope="C" xsi:type="Property"/>
                        </code>
                        <valueset localId="107" locator="63:35-63:52" name="Active Condition" preserve="true"/>
                     </where>
                  </operand>
                  <operand localId="116" locator="66:5-69:5" xsi:type="Query">
                     <source localId="111" locator="67:7-67:65" alias="C">
                        <expression localId="110" locator="67:7-67:63" dataType="fhir:Condition" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                           <codes locator="67:27-67:62" name="Limited Life Expectancy Conditions" preserve="true" xsi:type="ValueSetRef"/>
                        </expression>
                     </source>
                     <where localId="115" locator="68:9-68:52" xsi:type="InValueSet">
                        <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="113" locator="68:15-68:30" path="clinicalStatus" scope="C" xsi:type="Property"/>
                        </code>
                        <valueset localId="114" locator="68:35-68:52" name="Active Condition" preserve="true"/>
                     </where>
                  </operand>
               </operand>
            </operand>
            <operand localId="197" locator="72:6-104:3" xsi:type="Exists">
               <operand localId="196" locator="72:13-104:3" xsi:type="Union">
                  <operand xsi:type="As">
                     <operand localId="163" locator="73:5-91:5" xsi:type="Union">
                        <operand xsi:type="As">
                           <operand localId="137" locator="73:5-81:5" xsi:type="Union">
                              <operand localId="127" locator="73:5-76:5" xsi:type="Query">
                                 <source localId="120" locator="74:7-74:56" alias="RR">
                                    <expression localId="119" locator="74:7-74:53" dataType="fhir:ServiceRequest" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                                       <codes xsi:type="ToList">
                                          <operand locator="74:32-74:52" name="Referral to Hospice" xsi:type="CodeRef"/>
                                       </codes>
                                    </expression>
                                 </source>
                                 <where localId="126" locator="75:9-75:52" xsi:type="In">
                                    <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand localId="122" locator="75:15-75:23" path="status" scope="RR" xsi:type="Property"/>
                                    </operand>
                                    <operand localId="125" locator="75:28-75:52" xsi:type="List">
                                       <element localId="123" locator="75:30-75:37" valueType="t:String" value="active" xsi:type="Literal"/>
                                       <element localId="124" locator="75:40-75:50" valueType="t:String" value="completed" xsi:type="Literal"/>
                                    </operand>
                                 </where>
                              </operand>
                              <operand localId="136" locator="78:5-81:5" xsi:type="Query">
                                 <source localId="129" locator="79:7-79:59" alias="P">
                                    <expression localId="128" locator="79:7-79:57" dataType="fhir:ServiceRequest" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                                       <codes locator="79:32-79:56" name="Hospice Procedure Codes" preserve="true" xsi:type="ValueSetRef"/>
                                    </expression>
                                 </source>
                                 <where localId="135" locator="80:9-80:56" xsi:type="In">
                                    <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand localId="131" locator="80:15-80:22" path="status" scope="P" xsi:type="Property"/>
                                    </operand>
                                    <operand localId="134" locator="80:27-80:56" xsi:type="List">
                                       <element localId="132" locator="80:29-80:41" valueType="t:String" value="in-progress" xsi:type="Literal"/>
                                       <element localId="133" locator="80:44-80:54" valueType="t:String" value="completed" xsi:type="Literal"/>
                                    </operand>
                                 </where>
                              </operand>
                           </operand>
                           <asTypeSpecifier xsi:type="ListTypeSpecifier">
                              <elementType xsi:type="ChoiceTypeSpecifier">
                                 <choice name="fhir:ServiceRequest" xsi:type="NamedTypeSpecifier"/>
                                 <choice name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                              </elementType>
                           </asTypeSpecifier>
                        </operand>
                        <operand xsi:type="As">
                           <operand localId="162" xsi:type="Union">
                              <operand xsi:type="As">
                                 <operand localId="149" locator="83:5-86:5" xsi:type="Query">
                                    <source localId="139" locator="84:7-84:59" alias="E">
                                       <expression localId="138" locator="84:7-84:57" dataType="fhir:ServiceRequest" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                                          <codes locator="84:32-84:56" name="Hospice Procedure Codes" preserve="true" xsi:type="ValueSetRef"/>
                                       </expression>
                                    </source>
                                    <where localId="148" locator="85:9-85:88" xsi:type="In">
                                       <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <operand localId="141" locator="85:15-85:22" path="status" scope="E" xsi:type="Property"/>
                                       </operand>
                                       <operand localId="147" locator="85:27-85:88" xsi:type="List">
                                          <element localId="142" locator="85:29-85:37" valueType="t:String" value="planned" xsi:type="Literal"/>
                                          <element localId="143" locator="85:40-85:48" valueType="t:String" value="arrived" xsi:type="Literal"/>
                                          <element localId="144" locator="85:51-85:63" valueType="t:String" value="in-progress" xsi:type="Literal"/>
                                          <element localId="145" locator="85:66-85:75" valueType="t:String" value="finished" xsi:type="Literal"/>
                                          <element localId="146" locator="85:78-85:86" valueType="t:String" value="onleave" xsi:type="Literal"/>
                                       </operand>
                                    </where>
                                 </operand>
                                 <asTypeSpecifier xsi:type="ListTypeSpecifier">
                                    <elementType xsi:type="ChoiceTypeSpecifier">
                                       <choice name="fhir:ServiceRequest" xsi:type="NamedTypeSpecifier"/>
                                       <choice name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                                    </elementType>
                                 </asTypeSpecifier>
                              </operand>
                              <operand xsi:type="As">
                                 <operand localId="161" locator="88:5-91:5" xsi:type="Query">
                                    <source localId="152" locator="89:7-89:54" alias="O">
                                       <expression localId="151" locator="89:7-89:52" dataType="fhir:Observation" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                                          <codes locator="89:29-89:51" name="Hospice Finding Codes" preserve="true" xsi:type="ValueSetRef"/>
                                       </expression>
                                    </source>
                                    <where localId="160" locator="90:9-90:78" xsi:type="Not">
                                       <operand localId="159" locator="90:19-90:78" xsi:type="In">
                                          <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                             <operand localId="154" locator="90:20-90:27" path="status" scope="O" xsi:type="Property"/>
                                          </operand>
                                          <operand localId="158" locator="90:32-90:77" xsi:type="List">
                                             <element localId="155" locator="90:34-90:42" valueType="t:String" value="unknown" xsi:type="Literal"/>
                                             <element localId="156" locator="90:45-90:62" valueType="t:String" value="entered-in-error" xsi:type="Literal"/>
                                             <element localId="157" locator="90:65-90:75" valueType="t:String" value="cancelled" xsi:type="Literal"/>
                                          </operand>
                                       </operand>
                                    </where>
                                 </operand>
                                 <asTypeSpecifier xsi:type="ListTypeSpecifier">
                                    <elementType xsi:type="ChoiceTypeSpecifier">
                                       <choice name="fhir:ServiceRequest" xsi:type="NamedTypeSpecifier"/>
                                       <choice name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                                    </elementType>
                                 </asTypeSpecifier>
                              </operand>
                           </operand>
                           <asTypeSpecifier xsi:type="ListTypeSpecifier">
                              <elementType xsi:type="ChoiceTypeSpecifier">
                                 <choice name="fhir:ServiceRequest" xsi:type="NamedTypeSpecifier"/>
                                 <choice name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                              </elementType>
                           </asTypeSpecifier>
                        </operand>
                     </operand>
                     <asTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType xsi:type="ChoiceTypeSpecifier">
                           <choice name="fhir:ServiceRequest" xsi:type="NamedTypeSpecifier"/>
                           <choice name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                           <choice name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                        </elementType>
                     </asTypeSpecifier>
                  </operand>
                  <operand xsi:type="As">
                     <operand localId="195" locator="93:5-103:5" xsi:type="Query">
                        <source localId="165" locator="94:7-94:19" alias="E">
                           <expression localId="164" locator="94:7-94:17" dataType="fhir:Encounter" xsi:type="Retrieve"/>
                        </source>
                        <where localId="194" locator="95:9-102:88" xsi:type="And">
                           <operand localId="184" locator="96:11-101:11" xsi:type="If">
                              <condition localId="177" locator="97:16-98:77" xsi:type="Or">
                                 <operand localId="170" locator="97:16-97:68" xsi:type="IsNull">
                                    <operand localId="169" locator="97:16-97:60" path="coding" xsi:type="Property">
                                       <source localId="168" locator="97:16-97:53" path="dischargeDisposition" xsi:type="Property">
                                          <source localId="167" locator="97:16-97:32" path="hospitalization" scope="E" xsi:type="Property"/>
                                       </source>
                                    </operand>
                                 </operand>
                                 <operand localId="176" locator="98:20-98:77" xsi:type="Not">
                                    <operand localId="175" locator="98:24-98:77" xsi:type="Exists">
                                       <operand localId="174" locator="98:31-98:77" path="coding" xsi:type="Property">
                                          <source localId="173" locator="98:32-98:69" path="dischargeDisposition" xsi:type="Property">
                                             <source localId="172" locator="98:32-98:48" path="hospitalization" scope="E" xsi:type="Property"/>
                                          </source>
                                       </operand>
                                    </operand>
                                 </operand>
                              </condition>
                              <then localId="178" locator="99:20-99:24" valueType="t:Boolean" value="false" xsi:type="Literal"/>
                              <else localId="183" locator="100:18-100:80" xsi:type="InValueSet">
                                 <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="181" locator="100:18-100:55" path="dischargeDisposition" xsi:type="Property">
                                       <source localId="180" locator="100:18-100:34" path="hospitalization" scope="E" xsi:type="Property"/>
                                    </operand>
                                 </code>
                                 <valueset localId="182" locator="100:60-100:80" name="Hospice Disposition" preserve="true"/>
                              </else>
                           </operand>
                           <operand localId="193" locator="102:15-102:88" xsi:type="In">
                              <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="186" locator="102:15-102:22" path="status" scope="E" xsi:type="Property"/>
                              </operand>
                              <operand localId="192" locator="102:27-102:88" xsi:type="List">
                                 <element localId="187" locator="102:29-102:37" valueType="t:String" value="planned" xsi:type="Literal"/>
                                 <element localId="188" locator="102:40-102:48" valueType="t:String" value="arrived" xsi:type="Literal"/>
                                 <element localId="189" locator="102:51-102:63" valueType="t:String" value="in-progress" xsi:type="Literal"/>
                                 <element localId="190" locator="102:66-102:75" valueType="t:String" value="finished" xsi:type="Literal"/>
                                 <element localId="191" locator="102:78-102:86" valueType="t:String" value="onleave" xsi:type="Literal"/>
                              </operand>
                           </operand>
                        </where>
                     </operand>
                     <asTypeSpecifier xsi:type="ListTypeSpecifier">
                        <elementType xsi:type="ChoiceTypeSpecifier">
                           <choice name="fhir:ServiceRequest" xsi:type="NamedTypeSpecifier"/>
                           <choice name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
                           <choice name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                        </elementType>
                     </asTypeSpecifier>
                  </operand>
               </operand>
            </operand>
         </expression>
      </def>
      <def localId="378" locator="106:1-149:5" name="Prescriptions" context="Unfiltered" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="378">
               <a:s>define function Prescriptions(Orders List&lt;MedicationRequest>):
  </a:s>
               <a:s r="377">
                  <a:s r="377">
                     <a:s>
                        <a:s r="203">
                           <a:s r="202">
                              <a:s>
                                 <a:s>Orders</a:s>
                              </a:s>
                           </a:s>
                           <a:s> O</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s>
                        <a:s>let
      // NOTE: Assuming medication is specified as a CodeableConcept with a single RxNorm code
      </a:s>
                        <a:s r="210">
                           <a:s>rxNormCode: </a:s>
                           <a:s r="209">
                              <a:s>ToCode(</a:s>
                              <a:s r="208">
                                 <a:s r="206">
                                    <a:s r="205">
                                       <a:s r="204">
                                          <a:s>O</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="205">
                                          <a:s>medication</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="206">
                                       <a:s>coding</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s r="207">[0]</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="214">
                           <a:s>medicationName: </a:s>
                           <a:s r="213">
                              <a:s r="211">
                                 <a:s>OMTKLogic</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="213">
                                 <a:s>GetMedicationName(</a:s>
                                 <a:s r="212">
                                    <a:s>rxNormCode</a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      // NOTE: Assuming a single dosage instruction element
      </a:s>
                        <a:s r="219">
                           <a:s>dosageInstruction: </a:s>
                           <a:s r="218">
                              <a:s r="216">
                                 <a:s r="215">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="216">
                                    <a:s>dosageInstruction</a:s>
                                 </a:s>
                              </a:s>
                              <a:s r="217">[0]</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="223">
                           <a:s>repeat: </a:s>
                           <a:s r="222">
                              <a:s r="221">
                                 <a:s r="220">
                                    <a:s>dosageInstruction</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="221">
                                    <a:s>timing</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="222">
                                 <a:s>repeat</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="231">
                           <a:s>frequency: </a:s>
                           <a:s r="230">
                              <a:s>Coalesce(</a:s>
                              <a:s r="226">
                                 <a:s r="225">
                                    <a:s r="224">
                                       <a:s>repeat</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="225">
                                       <a:s>frequencyMax</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="226">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="229">
                                 <a:s r="228">
                                    <a:s r="227">
                                       <a:s>repeat</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="228">
                                       <a:s>frequency</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="229">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="239">
                           <a:s>period: </a:s>
                           <a:s r="238">
                              <a:s>System.Quantity { </a:s>
                              <a:s>
                                 <a:s>value: </a:s>
                                 <a:s r="234">
                                    <a:s r="233">
                                       <a:s r="232">
                                          <a:s>repeat</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="233">
                                          <a:s>period</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="234">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s>
                                 <a:s>unit: </a:s>
                                 <a:s r="237">
                                    <a:s r="236">
                                       <a:s r="235">
                                          <a:s>repeat</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="236">
                                          <a:s>periodUnit</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="237">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s> }</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="293">
                           <a:s>doseDescription:
        </a:s>
                           <a:s r="292">
                              <a:s>Coalesce(
          // There should be a conversion from FHIR.SimpleQuantity to System.Quantity
          </a:s>
                              <a:s r="290">
                                 <a:s>if </a:s>
                                 <a:s r="246">
                                    <a:s r="244">
                                       <a:s r="243">
                                          <a:s r="241">
                                             <a:s r="240">
                                                <a:s>dosageInstruction</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="241">
                                                <a:s>doseAndRate</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s r="242">[0]</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="244">
                                          <a:s>dose</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> is </a:s>
                                    <a:s r="245">
                                       <a:s>FHIR.Range</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
            then </a:s>
                                 <a:s r="282">
                                    <a:s r="273">
                                       <a:s r="264">
                                          <a:s r="262">
                                             <a:s>ToString(</a:s>
                                             <a:s r="261">
                                                <a:s>ToQuantity(</a:s>
                                                <a:s r="252">
                                                   <a:s r="251">
                                                      <a:s r="250">
                                                         <a:s r="248">
                                                            <a:s r="247">
                                                               <a:s>dosageInstruction</a:s>
                                                            </a:s>
                                                            <a:s>.</a:s>
                                                            <a:s r="248">
                                                               <a:s>doseAndRate</a:s>
                                                            </a:s>
                                                         </a:s>
                                                         <a:s r="249">[0]</a:s>
                                                      </a:s>
                                                      <a:s>.</a:s>
                                                      <a:s r="251">
                                                         <a:s>dose</a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="252">
                                                      <a:s>low</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s>)</a:s>
                                             </a:s>
                                             <a:s>)</a:s>
                                          </a:s>
                                          <a:s>
                          + </a:s>
                                          <a:s r="263">
                                             <a:s>'-'</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> + </a:s>
                                       <a:s r="272">
                                          <a:s>ToString(</a:s>
                                          <a:s r="271">
                                             <a:s>ToQuantity(</a:s>
                                             <a:s r="270">
                                                <a:s r="269">
                                                   <a:s r="268">
                                                      <a:s r="266">
                                                         <a:s r="265">
                                                            <a:s>dosageInstruction</a:s>
                                                         </a:s>
                                                         <a:s>.</a:s>
                                                         <a:s r="266">
                                                            <a:s>doseAndRate</a:s>
                                                         </a:s>
                                                      </a:s>
                                                      <a:s r="267">[0]</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="269">
                                                      <a:s>dose</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="270">
                                                   <a:s>high</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>)</a:s>
                                          </a:s>
                                          <a:s>)</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>
                          + </a:s>
                                    <a:s r="281">
                                       <a:s r="280">
                                          <a:s r="279">
                                             <a:s r="278">
                                                <a:s r="277">
                                                   <a:s r="275">
                                                      <a:s r="274">
                                                         <a:s>dosageInstruction</a:s>
                                                      </a:s>
                                                      <a:s>.</a:s>
                                                      <a:s r="275">
                                                         <a:s>doseAndRate</a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s r="276">[0]</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="278">
                                                   <a:s>dose</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="279">
                                                <a:s>high</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="280">
                                             <a:s>unit</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="281">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
            else </a:s>
                                 <a:s r="289">
                                    <a:s>ToString(</a:s>
                                    <a:s r="288">
                                       <a:s>ToQuantity(</a:s>
                                       <a:s r="287">
                                          <a:s r="286">
                                             <a:s r="284">
                                                <a:s r="283">
                                                   <a:s>dosageInstruction</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="284">
                                                   <a:s>doseAndRate</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s r="285">[0]</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="287">
                                             <a:s>dose</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>,
            </a:s>
                              <a:s r="291">
                                 <a:s>''</a:s>
                              </a:s>
                              <a:s>
        )</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="311">
                           <a:s>frequencyDescription:
        </a:s>
                           <a:s r="310">
                              <a:s r="299">
                                 <a:s>ToString(</a:s>
                                 <a:s r="298">
                                    <a:s r="297">
                                       <a:s r="296">
                                          <a:s r="295">
                                             <a:s r="294">
                                                <a:s>dosageInstruction</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="295">
                                                <a:s>timing</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="296">
                                             <a:s>repeat</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="297">
                                          <a:s>frequency</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="298">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s> +
          </a:s>
                              <a:s r="309">
                                 <a:s>Coalesce(
            </a:s>
                                 <a:s r="307">
                                    <a:s r="300">
                                       <a:s>'-'</a:s>
                                    </a:s>
                                    <a:s> + </a:s>
                                    <a:s r="306">
                                       <a:s>ToString(</a:s>
                                       <a:s r="305">
                                          <a:s r="304">
                                             <a:s r="303">
                                                <a:s r="302">
                                                   <a:s r="301">
                                                      <a:s>dosageInstruction</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="302">
                                                      <a:s>timing</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="303">
                                                   <a:s>repeat</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="304">
                                                <a:s>frequencyMax</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="305">
                                             <a:s>value</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>,
            </a:s>
                                 <a:s r="308">
                                    <a:s>''</a:s>
                                 </a:s>
                                 <a:s>
          )</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="376">
                        <a:s>return </a:s>
                        <a:s r="375">
                           <a:s>{
      </a:s>
                           <a:s>
                              <a:s>rxNormCode: </a:s>
                              <a:s r="312">
                                 <a:s>rxNormCode</a:s>
                              </a:s>
                           </a:s>
                           <a:s>,
      </a:s>
                           <a:s>
                              <a:s>isDraft: </a:s>
                              <a:s r="317">
                                 <a:s r="315">
                                    <a:s r="314">
                                       <a:s r="313">
                                          <a:s>O</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="314">
                                          <a:s>status</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="315">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> = </a:s>
                                 <a:s r="316">
                                    <a:s>'draft'</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>,
      // NOTE: Assuming asNeeded is expressed as a boolean
      </a:s>
                           <a:s>
                              <a:s>isPRN: </a:s>
                              <a:s r="320">
                                 <a:s r="319">
                                    <a:s r="318">
                                       <a:s>dosageInstruction</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="319">
                                       <a:s>asNeeded</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="320">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>,
      </a:s>
                           <a:s>
                              <a:s>prescription:
        </a:s>
                              <a:s r="347">
                                 <a:s>if </a:s>
                                 <a:s r="323">
                                    <a:s r="322">
                                       <a:s r="321">
                                          <a:s>dosageInstruction</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="322">
                                          <a:s>text</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> is not null</a:s>
                                 </a:s>
                                 <a:s> then
          </a:s>
                                 <a:s r="330">
                                    <a:s r="326">
                                       <a:s r="324">
                                          <a:s>medicationName</a:s>
                                       </a:s>
                                       <a:s> + </a:s>
                                       <a:s r="325">
                                          <a:s>' '</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> + </a:s>
                                    <a:s r="329">
                                       <a:s r="328">
                                          <a:s r="327">
                                             <a:s>dosageInstruction</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="328">
                                             <a:s>text</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="329">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
        else
          // TODO: Shouldn't need the .value here on asNeededBoolean
          </a:s>
                                 <a:s r="346">
                                    <a:s r="339">
                                       <a:s r="337">
                                          <a:s r="335">
                                             <a:s r="333">
                                                <a:s r="331">
                                                   <a:s>medicationName</a:s>
                                                </a:s>
                                                <a:s> + </a:s>
                                                <a:s r="332">
                                                   <a:s>' '</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> + </a:s>
                                             <a:s r="334">
                                                <a:s>doseDescription</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> + </a:s>
                                          <a:s r="336">
                                             <a:s>' q'</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> + </a:s>
                                       <a:s r="338">
                                          <a:s>frequencyDescription</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> + </a:s>
                                    <a:s r="345">
                                       <a:s>(</a:s>
                                       <a:s r="345">
                                          <a:s>if </a:s>
                                          <a:s r="342">
                                             <a:s r="341">
                                                <a:s r="340">
                                                   <a:s>dosageInstruction</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="341">
                                                   <a:s>asNeeded</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="342">
                                                <a:s>value</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> then </a:s>
                                          <a:s r="343">
                                             <a:s>' PRN'</a:s>
                                          </a:s>
                                          <a:s> else </a:s>
                                          <a:s r="344">
                                             <a:s>''</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>,
      // TODO: Shouldn't need the ToQuantity here...
      </a:s>
                           <a:s>
                              <a:s>dose: </a:s>
                              <a:s r="368">
                                 <a:s>if </a:s>
                                 <a:s r="354">
                                    <a:s r="352">
                                       <a:s r="351">
                                          <a:s r="349">
                                             <a:s r="348">
                                                <a:s>dosageInstruction</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="349">
                                                <a:s>doseAndRate</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s r="350">[0]</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="352">
                                          <a:s>dose</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> is </a:s>
                                    <a:s r="353">
                                       <a:s>FHIR.Range</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
            then </a:s>
                                 <a:s r="361">
                                    <a:s>ToQuantity(</a:s>
                                    <a:s r="360">
                                       <a:s r="359">
                                          <a:s r="358">
                                             <a:s r="356">
                                                <a:s r="355">
                                                   <a:s>dosageInstruction</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="356">
                                                   <a:s>doseAndRate</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s r="357">[0]</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="359">
                                             <a:s>dose</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="360">
                                          <a:s>high</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                                 <a:s>
            else </a:s>
                                 <a:s r="367">
                                    <a:s>ToQuantity(</a:s>
                                    <a:s r="366">
                                       <a:s r="365">
                                          <a:s r="363">
                                             <a:s r="362">
                                                <a:s>dosageInstruction</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="363">
                                                <a:s>doseAndRate</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s r="364">[0]</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="366">
                                          <a:s>dose</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>,
      </a:s>
                           <a:s>
                              <a:s>dosesPerDay: </a:s>
                              <a:s r="374">
                                 <a:s>Coalesce(</a:s>
                                 <a:s r="372">
                                    <a:s r="369">
                                       <a:s>OMTKLogic</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="372">
                                       <a:s>ToDaily(</a:s>
                                       <a:s r="370">
                                          <a:s>frequency</a:s>
                                       </a:s>
                                       <a:s>, </a:s>
                                       <a:s r="371">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s r="373">, 1.0)</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
    }</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="377" locator="107:3-149:5" xsi:type="Query">
            <source localId="203" locator="107:3-107:10" alias="O">
               <expression localId="202" locator="107:3-107:8" name="Orders" xsi:type="OperandRef"/>
            </source>
            <let localId="210" locator="110:7-110:48" identifier="rxNormCode">
               <expression localId="209" locator="110:19-110:48" name="ToCode" xsi:type="FunctionRef">
                  <operand localId="208" locator="110:26-110:47" xsi:type="Indexer">
                     <operand localId="206" locator="110:26-110:44" path="coding" xsi:type="Property">
                        <source localId="205" locator="110:26-110:37" path="medication" scope="O" xsi:type="Property"/>
                     </operand>
                     <operand localId="207" locator="110:46" valueType="t:Integer" value="0" xsi:type="Literal"/>
                  </operand>
               </expression>
            </let>
            <let localId="214" locator="111:7-111:61" identifier="medicationName">
               <expression localId="213" locator="111:23-111:61" name="GetMedicationName" libraryName="OMTKLogic" xsi:type="FunctionRef">
                  <operand localId="212" locator="111:51-111:60" name="rxNormCode" xsi:type="QueryLetRef"/>
               </expression>
            </let>
            <let localId="219" locator="113:7-113:47" identifier="dosageInstruction">
               <expression localId="218" locator="113:26-113:47" xsi:type="Indexer">
                  <operand localId="216" locator="113:26-113:44" path="dosageInstruction" scope="O" xsi:type="Property"/>
                  <operand localId="217" locator="113:46" valueType="t:Integer" value="0" xsi:type="Literal"/>
               </expression>
            </let>
            <let localId="223" locator="114:7-114:45" identifier="repeat">
               <expression localId="222" locator="114:15-114:45" path="repeat" xsi:type="Property">
                  <source localId="221" locator="114:15-114:38" path="timing" xsi:type="Property">
                     <source localId="220" locator="114:15-114:31" name="dosageInstruction" xsi:type="QueryLetRef"/>
                  </source>
               </expression>
            </let>
            <let localId="231" locator="115:7-115:76" identifier="frequency">
               <expression localId="230" locator="115:18-115:76" xsi:type="Coalesce">
                  <operand localId="226" locator="115:27-115:51" path="value" xsi:type="Property">
                     <source localId="225" locator="115:27-115:45" path="frequencyMax" xsi:type="Property">
                        <source localId="224" locator="115:27-115:32" name="repeat" xsi:type="QueryLetRef"/>
                     </source>
                  </operand>
                  <operand localId="229" locator="115:54-115:75" path="value" xsi:type="Property">
                     <source localId="228" locator="115:54-115:69" path="frequency" xsi:type="Property">
                        <source localId="227" locator="115:54-115:59" name="repeat" xsi:type="QueryLetRef"/>
                     </source>
                  </operand>
               </expression>
            </let>
            <let localId="239" locator="116:7-116:91" identifier="period">
               <expression localId="238" locator="116:15-116:91" classType="t:Quantity" xsi:type="Instance">
                  <element name="value">
                     <value localId="234" locator="116:40-116:58" path="value" xsi:type="Property">
                        <source localId="233" locator="116:40-116:52" path="period" xsi:type="Property">
                           <source localId="232" locator="116:40-116:45" name="repeat" xsi:type="QueryLetRef"/>
                        </source>
                     </value>
                  </element>
                  <element name="unit">
                     <value localId="237" locator="116:67-116:89" path="value" xsi:type="Property">
                        <source localId="236" locator="116:67-116:83" path="periodUnit" xsi:type="Property">
                           <source localId="235" locator="116:67-116:72" name="repeat" xsi:type="QueryLetRef"/>
                        </source>
                     </value>
                  </element>
               </expression>
            </let>
            <let localId="293" locator="117:7-126:9" identifier="doseDescription">
               <expression localId="292" locator="118:9-126:9" xsi:type="Coalesce">
                  <operand localId="290" locator="120:11-124:76" xsi:type="If">
                     <condition localId="246" locator="120:14-120:64" xsi:type="Is">
                        <operand localId="244" locator="120:14-120:50" path="dose" xsi:type="Property">
                           <source localId="243" locator="120:14-120:45" xsi:type="Indexer">
                              <operand localId="241" locator="120:14-120:42" path="doseAndRate" xsi:type="Property">
                                 <source localId="240" locator="120:14-120:30" name="dosageInstruction" xsi:type="QueryLetRef"/>
                              </operand>
                              <operand localId="242" locator="120:44" valueType="t:Integer" value="0" xsi:type="Literal"/>
                           </source>
                        </operand>
                        <isTypeSpecifier localId="245" locator="120:55-120:64" name="fhir:Range" xsi:type="NamedTypeSpecifier"/>
                     </condition>
                     <then localId="282" locator="121:18-123:81" xsi:type="Concatenate">
                        <operand localId="273" locator="121:18-122:98" xsi:type="Concatenate">
                           <operand localId="264" locator="121:18-122:31" xsi:type="Concatenate">
                              <operand localId="262" locator="121:18-121:80" xsi:type="ToString">
                                 <operand localId="261" locator="121:27-121:79" name="ToQuantity" xsi:type="FunctionRef">
                                    <operand localId="252" locator="121:38-121:78" path="low" xsi:type="Property">
                                       <source localId="251" locator="121:38-121:74" path="dose" xsi:type="Property">
                                          <source localId="250" locator="121:38-121:69" xsi:type="Indexer">
                                             <operand localId="248" locator="121:38-121:66" path="doseAndRate" xsi:type="Property">
                                                <source localId="247" locator="121:38-121:54" name="dosageInstruction" xsi:type="QueryLetRef"/>
                                             </operand>
                                             <operand localId="249" locator="121:68" valueType="t:Integer" value="0" xsi:type="Literal"/>
                                          </source>
                                       </source>
                                    </operand>
                                 </operand>
                              </operand>
                              <operand localId="263" locator="122:29-122:31" valueType="t:String" value="-" xsi:type="Literal"/>
                           </operand>
                           <operand localId="272" locator="122:35-122:98" xsi:type="ToString">
                              <operand localId="271" locator="122:44-122:97" name="ToQuantity" xsi:type="FunctionRef">
                                 <operand localId="270" locator="122:55-122:96" path="high" xsi:type="Property">
                                    <source localId="269" locator="122:55-122:91" path="dose" xsi:type="Property">
                                       <source localId="268" locator="122:55-122:86" xsi:type="Indexer">
                                          <operand localId="266" locator="122:55-122:83" path="doseAndRate" xsi:type="Property">
                                             <source localId="265" locator="122:55-122:71" name="dosageInstruction" xsi:type="QueryLetRef"/>
                                          </operand>
                                          <operand localId="267" locator="122:85" valueType="t:Integer" value="0" xsi:type="Literal"/>
                                       </source>
                                    </source>
                                 </operand>
                              </operand>
                           </operand>
                        </operand>
                        <operand localId="281" locator="123:29-123:81" path="value" xsi:type="Property">
                           <source localId="280" locator="123:29-123:75" path="unit" xsi:type="Property">
                              <source localId="279" locator="123:29-123:70" path="high" xsi:type="Property">
                                 <source localId="278" locator="123:29-123:65" path="dose" xsi:type="Property">
                                    <source localId="277" locator="123:29-123:60" xsi:type="Indexer">
                                       <operand localId="275" locator="123:29-123:57" path="doseAndRate" xsi:type="Property">
                                          <source localId="274" locator="123:29-123:45" name="dosageInstruction" xsi:type="QueryLetRef"/>
                                       </operand>
                                       <operand localId="276" locator="123:59" valueType="t:Integer" value="0" xsi:type="Literal"/>
                                    </source>
                                 </source>
                              </source>
                           </source>
                        </operand>
                     </then>
                     <else localId="289" locator="124:18-124:76" xsi:type="ToString">
                        <operand localId="288" locator="124:27-124:75" name="ToQuantity" xsi:type="FunctionRef">
                           <operand asType="fhir:Quantity" xsi:type="As">
                              <operand localId="287" locator="124:38-124:74" path="dose" xsi:type="Property">
                                 <source localId="286" locator="124:38-124:69" xsi:type="Indexer">
                                    <operand localId="284" locator="124:38-124:66" path="doseAndRate" xsi:type="Property">
                                       <source localId="283" locator="124:38-124:54" name="dosageInstruction" xsi:type="QueryLetRef"/>
                                    </operand>
                                    <operand localId="285" locator="124:68" valueType="t:Integer" value="0" xsi:type="Literal"/>
                                 </source>
                              </operand>
                           </operand>
                        </operand>
                     </else>
                  </operand>
                  <operand localId="291" locator="125:13-125:14" valueType="t:String" value="" xsi:type="Literal"/>
               </expression>
            </let>
            <let localId="311" locator="127:7-132:11" identifier="frequencyDescription">
               <expression localId="310" locator="128:9-132:11" xsi:type="Concatenate">
                  <operand localId="299" locator="128:9-128:65" xsi:type="ToString">
                     <operand localId="298" locator="128:18-128:64" path="value" xsi:type="Property">
                        <source localId="297" locator="128:18-128:58" path="frequency" xsi:type="Property">
                           <source localId="296" locator="128:18-128:48" path="repeat" xsi:type="Property">
                              <source localId="295" locator="128:18-128:41" path="timing" xsi:type="Property">
                                 <source localId="294" locator="128:18-128:34" name="dosageInstruction" xsi:type="QueryLetRef"/>
                              </source>
                           </source>
                        </source>
                     </operand>
                  </operand>
                  <operand localId="309" locator="129:11-132:11" xsi:type="Coalesce">
                     <operand localId="307" locator="130:13-130:78" xsi:type="Concatenate">
                        <operand localId="300" locator="130:13-130:15" valueType="t:String" value="-" xsi:type="Literal"/>
                        <operand localId="306" locator="130:19-130:78" xsi:type="ToString">
                           <operand localId="305" locator="130:28-130:77" path="value" xsi:type="Property">
                              <source localId="304" locator="130:28-130:71" path="frequencyMax" xsi:type="Property">
                                 <source localId="303" locator="130:28-130:58" path="repeat" xsi:type="Property">
                                    <source localId="302" locator="130:28-130:51" path="timing" xsi:type="Property">
                                       <source localId="301" locator="130:28-130:44" name="dosageInstruction" xsi:type="QueryLetRef"/>
                                    </source>
                                 </source>
                              </source>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="308" locator="131:13-131:14" valueType="t:String" value="" xsi:type="Literal"/>
                  </operand>
               </expression>
            </let>
            <return localId="376" locator="133:5-149:5">
               <expression localId="375" locator="133:12-149:5" xsi:type="Tuple">
                  <element name="rxNormCode">
                     <value localId="312" locator="134:19-134:28" name="rxNormCode" xsi:type="QueryLetRef"/>
                  </element>
                  <element name="isDraft">
                     <value localId="317" locator="135:16-135:39" xsi:type="Equal">
                        <operand localId="315" locator="135:16-135:29" path="value" xsi:type="Property">
                           <source localId="314" locator="135:16-135:23" path="status" scope="O" xsi:type="Property"/>
                        </operand>
                        <operand localId="316" locator="135:33-135:39" valueType="t:String" value="draft" xsi:type="Literal"/>
                     </value>
                  </element>
                  <element name="isPRN">
                     <value localId="320" locator="137:14-137:45" path="value" xsi:type="Property">
                        <source localId="319" locator="137:14-137:39" path="asNeeded" xsi:type="Property">
                           <source localId="318" locator="137:14-137:30" name="dosageInstruction" xsi:type="QueryLetRef"/>
                        </source>
                     </value>
                  </element>
                  <element name="prescription">
                     <value localId="347" locator="139:9-143:138" xsi:type="If">
                        <condition localId="323" locator="139:12-139:45" xsi:type="Not">
                           <operand locator="139:12-139:45" xsi:type="IsNull">
                              <operand localId="322" locator="139:12-139:33" path="text" xsi:type="Property">
                                 <source localId="321" locator="139:12-139:28" name="dosageInstruction" xsi:type="QueryLetRef"/>
                              </operand>
                           </operand>
                        </condition>
                        <then localId="330" locator="140:11-140:61" xsi:type="Concatenate">
                           <operand localId="326" locator="140:11-140:30" xsi:type="Concatenate">
                              <operand localId="324" locator="140:11-140:24" name="medicationName" xsi:type="QueryLetRef"/>
                              <operand localId="325" locator="140:28-140:30" valueType="t:String" value=" " xsi:type="Literal"/>
                           </operand>
                           <operand localId="329" locator="140:34-140:61" path="value" xsi:type="Property">
                              <source localId="328" locator="140:34-140:55" path="text" xsi:type="Property">
                                 <source localId="327" locator="140:34-140:50" name="dosageInstruction" xsi:type="QueryLetRef"/>
                              </source>
                           </operand>
                        </then>
                        <else localId="346" locator="143:11-143:138" xsi:type="Concatenate">
                           <operand localId="339" locator="143:11-143:78" xsi:type="Concatenate">
                              <operand localId="337" locator="143:11-143:55" xsi:type="Concatenate">
                                 <operand localId="335" locator="143:11-143:48" xsi:type="Concatenate">
                                    <operand localId="333" locator="143:11-143:30" xsi:type="Concatenate">
                                       <operand localId="331" locator="143:11-143:24" name="medicationName" xsi:type="QueryLetRef"/>
                                       <operand localId="332" locator="143:28-143:30" valueType="t:String" value=" " xsi:type="Literal"/>
                                    </operand>
                                    <operand localId="334" locator="143:34-143:48" name="doseDescription" xsi:type="QueryLetRef"/>
                                 </operand>
                                 <operand localId="336" locator="143:52-143:55" valueType="t:String" value=" q" xsi:type="Literal"/>
                              </operand>
                              <operand localId="338" locator="143:59-143:78" name="frequencyDescription" xsi:type="QueryLetRef"/>
                           </operand>
                           <operand localId="345" locator="143:82-143:138" xsi:type="If">
                              <condition localId="342" locator="143:86-143:117" path="value" xsi:type="Property">
                                 <source localId="341" locator="143:86-143:111" path="asNeeded" xsi:type="Property">
                                    <source localId="340" locator="143:86-143:102" name="dosageInstruction" xsi:type="QueryLetRef"/>
                                 </source>
                              </condition>
                              <then localId="343" locator="143:124-143:129" valueType="t:String" value=" PRN" xsi:type="Literal"/>
                              <else localId="344" locator="143:136-143:137" valueType="t:String" value="" xsi:type="Literal"/>
                           </operand>
                        </else>
                     </value>
                  </element>
                  <element name="dose">
                     <value localId="368" locator="145:13-147:66" xsi:type="If">
                        <condition localId="354" locator="145:16-145:66" xsi:type="Is">
                           <operand localId="352" locator="145:16-145:52" path="dose" xsi:type="Property">
                              <source localId="351" locator="145:16-145:47" xsi:type="Indexer">
                                 <operand localId="349" locator="145:16-145:44" path="doseAndRate" xsi:type="Property">
                                    <source localId="348" locator="145:16-145:32" name="dosageInstruction" xsi:type="QueryLetRef"/>
                                 </operand>
                                 <operand localId="350" locator="145:46" valueType="t:Integer" value="0" xsi:type="Literal"/>
                              </source>
                           </operand>
                           <isTypeSpecifier localId="353" locator="145:57-145:66" name="fhir:Range" xsi:type="NamedTypeSpecifier"/>
                        </condition>
                        <then localId="361" locator="146:18-146:71" name="ToQuantity" xsi:type="FunctionRef">
                           <operand localId="360" locator="146:29-146:70" path="high" xsi:type="Property">
                              <source localId="359" locator="146:29-146:65" path="dose" xsi:type="Property">
                                 <source localId="358" locator="146:29-146:60" xsi:type="Indexer">
                                    <operand localId="356" locator="146:29-146:57" path="doseAndRate" xsi:type="Property">
                                       <source localId="355" locator="146:29-146:45" name="dosageInstruction" xsi:type="QueryLetRef"/>
                                    </operand>
                                    <operand localId="357" locator="146:59" valueType="t:Integer" value="0" xsi:type="Literal"/>
                                 </source>
                              </source>
                           </operand>
                        </then>
                        <else localId="367" locator="147:18-147:66" name="ToQuantity" xsi:type="FunctionRef">
                           <operand asType="fhir:Quantity" xsi:type="As">
                              <operand localId="366" locator="147:29-147:65" path="dose" xsi:type="Property">
                                 <source localId="365" locator="147:29-147:60" xsi:type="Indexer">
                                    <operand localId="363" locator="147:29-147:57" path="doseAndRate" xsi:type="Property">
                                       <source localId="362" locator="147:29-147:45" name="dosageInstruction" xsi:type="QueryLetRef"/>
                                    </operand>
                                    <operand localId="364" locator="147:59" valueType="t:Integer" value="0" xsi:type="Literal"/>
                                 </source>
                              </operand>
                           </operand>
                        </else>
                     </value>
                  </element>
                  <element name="dosesPerDay">
                     <value localId="374" locator="148:20-148:70" xsi:type="Coalesce">
                        <operand localId="372" locator="148:29-148:64" name="ToDaily" libraryName="OMTKLogic" xsi:type="FunctionRef">
                           <operand localId="370" locator="148:47-148:55" name="frequency" xsi:type="QueryLetRef"/>
                           <operand localId="371" locator="148:58-148:63" name="period" xsi:type="QueryLetRef"/>
                        </operand>
                        <operand localId="373" locator="148:67-148:69" valueType="t:Decimal" value="1.0" xsi:type="Literal"/>
                     </value>
                  </element>
               </expression>
            </return>
         </expression>
         <operand name="Orders">
            <operandTypeSpecifier localId="201" locator="106:38-106:60" xsi:type="ListTypeSpecifier">
               <elementType localId="200" locator="106:43-106:59" name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="930" locator="246:1-247:76" name="ToQuantity" context="Unfiltered" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="930">
               <a:s>define function ToQuantity(quantity FHIR.Quantity):
  </a:s>
               <a:s r="929">
                  <a:s r="929">
                     <a:s>System.Quantity { </a:s>
                     <a:s>
                        <a:s>value: </a:s>
                        <a:s r="925">
                           <a:s r="924">
                              <a:s r="923">
                                 <a:s>quantity</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="924">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="925">
                              <a:s>value</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>, </a:s>
                     <a:s>
                        <a:s>unit: </a:s>
                        <a:s r="928">
                           <a:s r="927">
                              <a:s r="926">
                                 <a:s>quantity</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="927">
                                 <a:s>unit</a:s>
                              </a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="928">
                              <a:s>value</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s> }</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="929" locator="247:3-247:76" classType="t:Quantity" xsi:type="Instance">
            <element name="value">
               <value localId="925" locator="247:28-247:47" path="value" xsi:type="Property">
                  <source localId="924" locator="247:28-247:41" path="value" xsi:type="Property">
                     <source localId="923" locator="247:28-247:35" name="quantity" xsi:type="OperandRef"/>
                  </source>
               </value>
            </element>
            <element name="unit">
               <value localId="928" locator="247:56-247:74" path="value" xsi:type="Property">
                  <source localId="927" locator="247:56-247:68" path="unit" xsi:type="Property">
                     <source localId="926" locator="247:56-247:63" name="quantity" xsi:type="OperandRef"/>
                  </source>
               </value>
            </element>
         </expression>
         <operand name="quantity">
            <operandTypeSpecifier localId="253" locator="246:37-246:49" name="fhir:Quantity" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="413" locator="151:1-162:5" name="MME" context="Unfiltered" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="413">
               <a:s>define function MME(prescriptions List&lt;MedicationRequest>):
  </a:s>
               <a:s r="412">
                  <a:s r="412">
                     <a:s>
                        <a:s r="383">
                           <a:s r="382">
                              <a:s>(</a:s>
                              <a:s r="382">
                                 <a:s>Prescriptions(</a:s>
                                 <a:s r="381">
                                    <a:s>prescriptions</a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s> P</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s>
                        <a:s>let </a:s>
                        <a:s r="395">
                           <a:s>mme: </a:s>
                           <a:s r="394">
                              <a:s>SingletonFrom(</a:s>
                              <a:s r="393">
                                 <a:s r="384">
                                    <a:s>OMTKLogic</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="393">
                                    <a:s>CalculateMMEs(</a:s>
                                    <a:s r="392">
                                       <a:s>{ </a:s>
                                       <a:s r="391">
                                          <a:s>{ </a:s>
                                          <a:s>
                                             <a:s>rxNormCode: </a:s>
                                             <a:s r="386">
                                                <a:s r="385">
                                                   <a:s>P</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="386">
                                                   <a:s>rxNormCode</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>, </a:s>
                                          <a:s>
                                             <a:s>doseQuantity: </a:s>
                                             <a:s r="388">
                                                <a:s r="387">
                                                   <a:s>P</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="388">
                                                   <a:s>dose</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>, </a:s>
                                          <a:s>
                                             <a:s>dosesPerDay: </a:s>
                                             <a:s r="390">
                                                <a:s r="389">
                                                   <a:s>P</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="390">
                                                   <a:s>dosesPerDay</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> }</a:s>
                                       </a:s>
                                       <a:s> }</a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="411">
                        <a:s>return </a:s>
                        <a:s r="410">
                           <a:s>{
      </a:s>
                           <a:s>
                              <a:s>rxNormCode: </a:s>
                              <a:s r="397">
                                 <a:s r="396">
                                    <a:s>P</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="397">
                                    <a:s>rxNormCode</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>,
      </a:s>
                           <a:s>
                              <a:s>isDraft: </a:s>
                              <a:s r="399">
                                 <a:s r="398">
                                    <a:s>P</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="399">
                                    <a:s>isDraft</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>,
      </a:s>
                           <a:s>
                              <a:s>isPRN: </a:s>
                              <a:s r="401">
                                 <a:s r="400">
                                    <a:s>P</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="401">
                                    <a:s>isPRN</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>,
      </a:s>
                           <a:s>
                              <a:s>prescription: </a:s>
                              <a:s r="403">
                                 <a:s r="402">
                                    <a:s>P</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="403">
                                    <a:s>prescription</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>,
      </a:s>
                           <a:s>
                              <a:s>dailyDose: </a:s>
                              <a:s r="405">
                                 <a:s r="404">
                                    <a:s>mme</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="405">
                                    <a:s>dailyDoseDescription</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>,
      </a:s>
                           <a:s>
                              <a:s>conversionFactor: </a:s>
                              <a:s r="407">
                                 <a:s r="406">
                                    <a:s>mme</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="407">
                                    <a:s>conversionFactor</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>,
      </a:s>
                           <a:s>
                              <a:s>mme: </a:s>
                              <a:s r="409">
                                 <a:s r="408">
                                    <a:s>mme</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="409">
                                    <a:s>mme</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>
    }</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="412" locator="152:3-162:5" xsi:type="Query">
            <source localId="383" locator="152:3-152:34" alias="P">
               <expression localId="382" locator="152:3-152:32" name="Prescriptions" xsi:type="FunctionRef">
                  <operand localId="381" locator="152:18-152:30" name="prescriptions" xsi:type="OperandRef"/>
               </expression>
            </source>
            <let localId="395" locator="153:9-153:135" identifier="mme">
               <expression localId="394" locator="153:14-153:135" xsi:type="SingletonFrom">
                  <operand localId="393" locator="153:28-153:134" name="CalculateMMEs" libraryName="OMTKLogic" xsi:type="FunctionRef">
                     <operand localId="392" locator="153:52-153:133" xsi:type="List">
                        <element localId="391" locator="153:54-153:131" xsi:type="Tuple">
                           <element name="rxNormCode">
                              <value localId="386" locator="153:68-153:79" path="rxNormCode" scope="P" xsi:type="Property"/>
                           </element>
                           <element name="doseQuantity">
                              <value localId="388" locator="153:96-153:101" path="dose" scope="P" xsi:type="Property"/>
                           </element>
                           <element name="dosesPerDay">
                              <value localId="390" locator="153:117-153:129" path="dosesPerDay" scope="P" xsi:type="Property"/>
                           </element>
                        </element>
                     </operand>
                  </operand>
               </expression>
            </let>
            <return localId="411" locator="154:5-162:5">
               <expression localId="410" locator="154:12-162:5" xsi:type="Tuple">
                  <element name="rxNormCode">
                     <value localId="397" locator="155:19-155:30" path="rxNormCode" scope="P" xsi:type="Property"/>
                  </element>
                  <element name="isDraft">
                     <value localId="399" locator="156:16-156:24" path="isDraft" scope="P" xsi:type="Property"/>
                  </element>
                  <element name="isPRN">
                     <value localId="401" locator="157:14-157:20" path="isPRN" scope="P" xsi:type="Property"/>
                  </element>
                  <element name="prescription">
                     <value localId="403" locator="158:21-158:34" path="prescription" scope="P" xsi:type="Property"/>
                  </element>
                  <element name="dailyDose">
                     <value localId="405" locator="159:18-159:41" path="dailyDoseDescription" xsi:type="Property">
                        <source localId="404" locator="159:18-159:20" name="mme" xsi:type="QueryLetRef"/>
                     </value>
                  </element>
                  <element name="conversionFactor">
                     <value localId="407" locator="160:25-160:44" path="conversionFactor" xsi:type="Property">
                        <source localId="406" locator="160:25-160:27" name="mme" xsi:type="QueryLetRef"/>
                     </value>
                  </element>
                  <element name="mme">
                     <value localId="409" locator="161:12-161:18" path="mme" xsi:type="Property">
                        <source localId="408" locator="161:12-161:14" name="mme" xsi:type="QueryLetRef"/>
                     </value>
                  </element>
               </expression>
            </return>
         </expression>
         <operand name="prescriptions">
            <operandTypeSpecifier localId="380" locator="151:35-151:57" xsi:type="ListTypeSpecifier">
               <elementType localId="379" locator="151:40-151:56" name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="427" locator="164:1-168:3" name="TotalMME" context="Unfiltered" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="427">
               <a:s>define function TotalMME(prescriptions List&lt;MedicationRequest>):
  </a:s>
               <a:s r="426">
                  <a:s r="426">
                     <a:s>System.Quantity {
    </a:s>
                     <a:s>
                        <a:s>value: </a:s>
                        <a:s r="424">
                           <a:s>Sum(</a:s>
                           <a:s r="423">
                              <a:s>
                                 <a:s r="418">
                                    <a:s r="417">
                                       <a:s>(</a:s>
                                       <a:s r="417">
                                          <a:s>MME(</a:s>
                                          <a:s r="416">
                                             <a:s>prescriptions</a:s>
                                          </a:s>
                                          <a:s>)</a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                    <a:s> M</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> </a:s>
                              <a:s r="422">
                                 <a:s>return </a:s>
                                 <a:s r="421">
                                    <a:s r="420">
                                       <a:s r="419">
                                          <a:s>M</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="420">
                                          <a:s>mme</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="421">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s>,
    </a:s>
                     <a:s>
                        <a:s>unit: </a:s>
                        <a:s r="425">
                           <a:s>'mg/d'</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  }</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="426" locator="165:3-168:3" classType="t:Quantity" xsi:type="Instance">
            <element name="value">
               <value localId="424" locator="166:12-166:57" xsi:type="Sum">
                  <source localId="423" locator="166:16-166:56" xsi:type="Query">
                     <source localId="418" locator="166:16-166:37" alias="M">
                        <expression localId="417" locator="166:16-166:35" name="MME" xsi:type="FunctionRef">
                           <operand localId="416" locator="166:21-166:33" name="prescriptions" xsi:type="OperandRef"/>
                        </expression>
                     </source>
                     <return localId="422" locator="166:39-166:56">
                        <expression localId="421" locator="166:46-166:56" path="value" xsi:type="Property">
                           <source localId="420" locator="166:46-166:50" path="mme" scope="M" xsi:type="Property"/>
                        </expression>
                     </return>
                  </source>
               </value>
            </element>
            <element name="unit">
               <value localId="425" locator="167:11-167:16" valueType="t:String" value="mg/d" xsi:type="Literal"/>
            </element>
         </expression>
         <operand name="prescriptions">
            <operandTypeSpecifier localId="415" locator="164:40-164:62" xsi:type="ListTypeSpecifier">
               <elementType localId="414" locator="164:45-164:61" name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="693" locator="170:1-190:118" name="ProbableDaysInRange" context="Unfiltered" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="693">
               <a:s>define function ProbableDaysInRange(Orders List&lt;MedicationRequest>, daysPast Integer, numDaysInDaysPast Integer):
  </a:s>
               <a:s r="692">
                  <a:s r="692">
                     <a:s>
                        <a:s r="433">
                           <a:s r="432">
                              <a:s>
                                 <a:s>Orders</a:s>
                              </a:s>
                           </a:s>
                           <a:s> orders</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s>
                        <a:s>let
      </a:s>
                        <a:s r="442">
                           <a:s>frequency: </a:s>
                           <a:s r="441">
                              <a:s r="440">
                                 <a:s r="439">
                                    <a:s r="438">
                                       <a:s r="437">
                                          <a:s r="435">
                                             <a:s r="434">
                                                <a:s>orders</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="435">
                                                <a:s>dosageInstruction</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s r="436">[0]</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="438">
                                          <a:s>timing</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="439">
                                       <a:s>repeat</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="440">
                                    <a:s>frequency</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="441">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="451">
                           <a:s>period: </a:s>
                           <a:s r="450">
                              <a:s r="449">
                                 <a:s r="448">
                                    <a:s r="447">
                                       <a:s r="446">
                                          <a:s r="444">
                                             <a:s r="443">
                                                <a:s>orders</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="444">
                                                <a:s>dosageInstruction</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s r="445">[0]</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="447">
                                          <a:s>timing</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="448">
                                       <a:s>repeat</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="449">
                                    <a:s>period</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="450">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="514">
                           <a:s>periodDays: </a:s>
                           <a:s r="513">
                              <a:s>GetPeriodDays(</a:s>
                              <a:s r="459">
                                 <a:s r="458">
                                    <a:s r="457">
                                       <a:s r="456">
                                          <a:s r="455">
                                             <a:s r="453">
                                                <a:s r="452">
                                                   <a:s>orders</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="453">
                                                   <a:s>dosageInstruction</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s r="454">[0]</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="456">
                                             <a:s>timing</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="457">
                                          <a:s>repeat</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="458">
                                       <a:s>periodUnit</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="459">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="529">
                           <a:s>dosesPerDay:
        </a:s>
                           <a:s r="528">
                              <a:s>if </a:s>
                              <a:s r="521">
                                 <a:s r="519">
                                    <a:s>(</a:s>
                                    <a:s r="519">
                                       <a:s r="515">
                                          <a:s>frequency</a:s>
                                       </a:s>
                                       <a:s> / </a:s>
                                       <a:s r="518">
                                          <a:s>(</a:s>
                                          <a:s r="518">
                                             <a:s r="516">
                                                <a:s>period</a:s>
                                             </a:s>
                                             <a:s> * </a:s>
                                             <a:s r="517">
                                                <a:s>periodDays</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>)</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                                 <a:s r="520"> >= 1.0</a:s>
                              </a:s>
                              <a:s r="522">
        then 1.0
        else </a:s>
                              <a:s r="527">
                                 <a:s r="523">
                                    <a:s>frequency</a:s>
                                 </a:s>
                                 <a:s> / </a:s>
                                 <a:s r="526">
                                    <a:s>(</a:s>
                                    <a:s r="526">
                                       <a:s r="524">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s> * </a:s>
                                       <a:s r="525">
                                          <a:s>periodDays</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="534">
                           <a:s>repeat: </a:s>
                           <a:s r="533">
                              <a:s r="532">
                                 <a:s r="531">
                                    <a:s r="530">
                                       <a:s>orders</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="531">
                                       <a:s>dispenseRequest</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="532">
                                    <a:s>numberOfRepeatsAllowed</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="533">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="645">
                           <a:s>supplyDuration: </a:s>
                           <a:s r="644">
                              <a:s>GetDurationInDays(</a:s>
                              <a:s r="537">
                                 <a:s r="536">
                                    <a:s r="535">
                                       <a:s>orders</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="536">
                                       <a:s>dispenseRequest</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="537">
                                    <a:s>expectedSupplyDuration</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="653">
                           <a:s>validityPeriod: </a:s>
                           <a:s r="652">
                              <a:s>days between </a:s>
                              <a:s r="650">
                                 <a:s r="649">
                                    <a:s r="648">
                                       <a:s r="647">
                                          <a:s r="646">
                                             <a:s>orders</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="647">
                                             <a:s>dispenseRequest</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="648">
                                          <a:s>validityPeriod</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="649">
                                       <a:s>&quot;start&quot;</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="650">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> and </a:s>
                              <a:s r="651">
                                 <a:s>Today()</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="670">
                           <a:s>endDifference:
        </a:s>
                           <a:s r="669">
                              <a:s>if </a:s>
                              <a:s r="660">
                                 <a:s r="658">
                                    <a:s r="657">
                                       <a:s r="656">
                                          <a:s r="655">
                                             <a:s r="654">
                                                <a:s>orders</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="655">
                                                <a:s>dispenseRequest</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="656">
                                             <a:s>validityPeriod</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="657">
                                          <a:s>&quot;end&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="658">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> &lt; </a:s>
                                 <a:s r="659">
                                    <a:s>Today()</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
        then </a:s>
                              <a:s r="667">
                                 <a:s>days between </a:s>
                                 <a:s r="665">
                                    <a:s r="664">
                                       <a:s r="663">
                                          <a:s r="662">
                                             <a:s r="661">
                                                <a:s>orders</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="662">
                                                <a:s>dispenseRequest</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="663">
                                             <a:s>validityPeriod</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="664">
                                          <a:s>&quot;end&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="665">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> and </a:s>
                                 <a:s r="666">
                                    <a:s>Today()</a:s>
                                 </a:s>
                              </a:s>
                              <a:s r="668">
        else 0</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="691">
                        <a:s>return
      </a:s>
                        <a:s r="690">
                           <a:s>if </a:s>
                           <a:s r="675">
                              <a:s r="673">
                                 <a:s>(</a:s>
                                 <a:s r="673">
                                    <a:s r="671">
                                       <a:s>repeat</a:s>
                                    </a:s>
                                    <a:s> * </a:s>
                                    <a:s r="672">
                                       <a:s>supplyDuration</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s> &lt; </a:s>
                              <a:s r="674">
                                 <a:s>numDaysInDaysPast</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="676"> then false
      else
        </a:s>
                           <a:s r="689">
                              <a:s r="687">
                                 <a:s>(</a:s>
                                 <a:s r="687">
                                    <a:s r="683">
                                       <a:s r="677">
                                          <a:s>dosesPerDay</a:s>
                                       </a:s>
                                       <a:s> * </a:s>
                                       <a:s r="682">
                                          <a:s>(</a:s>
                                          <a:s r="682">
                                             <a:s r="680">
                                                <a:s>(</a:s>
                                                <a:s r="680">
                                                   <a:s r="678">
                                                      <a:s>repeat</a:s>
                                                   </a:s>
                                                   <a:s> * </a:s>
                                                   <a:s r="679">
                                                      <a:s>supplyDuration</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s>)</a:s>
                                             </a:s>
                                             <a:s> / </a:s>
                                             <a:s r="681">
                                                <a:s>validityPeriod</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>)</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> * </a:s>
                                    <a:s r="686">
                                       <a:s>(</a:s>
                                       <a:s r="686">
                                          <a:s r="684">
                                             <a:s>daysPast</a:s>
                                          </a:s>
                                          <a:s> - </a:s>
                                          <a:s r="685">
                                             <a:s>endDifference</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s> >= </a:s>
                              <a:s r="688">
                                 <a:s>numDaysInDaysPast</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="692" locator="171:3-190:118" xsi:type="Query">
            <source localId="433" locator="171:3-171:15" alias="orders">
               <expression localId="432" locator="171:3-171:8" name="Orders" xsi:type="OperandRef"/>
            </source>
            <let localId="442" locator="173:7-173:74" identifier="frequency">
               <expression localId="441" locator="173:18-173:74" path="value" xsi:type="Property">
                  <source localId="440" locator="173:18-173:68" path="frequency" xsi:type="Property">
                     <source localId="439" locator="173:18-173:58" path="repeat" xsi:type="Property">
                        <source localId="438" locator="173:18-173:51" path="timing" xsi:type="Property">
                           <source localId="437" locator="173:18-173:44" xsi:type="Indexer">
                              <operand localId="435" locator="173:18-173:41" path="dosageInstruction" scope="orders" xsi:type="Property"/>
                              <operand localId="436" locator="173:43" valueType="t:Integer" value="0" xsi:type="Literal"/>
                           </source>
                        </source>
                     </source>
                  </source>
               </expression>
            </let>
            <let localId="451" locator="174:7-174:68" identifier="period">
               <expression localId="450" locator="174:15-174:68" path="value" xsi:type="Property">
                  <source localId="449" locator="174:15-174:62" path="period" xsi:type="Property">
                     <source localId="448" locator="174:15-174:55" path="repeat" xsi:type="Property">
                        <source localId="447" locator="174:15-174:48" path="timing" xsi:type="Property">
                           <source localId="446" locator="174:15-174:41" xsi:type="Indexer">
                              <operand localId="444" locator="174:15-174:38" path="dosageInstruction" scope="orders" xsi:type="Property"/>
                              <operand localId="445" locator="174:40" valueType="t:Integer" value="0" xsi:type="Literal"/>
                           </source>
                        </source>
                     </source>
                  </source>
               </expression>
            </let>
            <let localId="514" locator="175:7-175:91" identifier="periodDays">
               <expression localId="513" locator="175:19-175:91" name="GetPeriodDays" xsi:type="FunctionRef">
                  <operand localId="459" locator="175:33-175:90" path="value" xsi:type="Property">
                     <source localId="458" locator="175:33-175:84" path="periodUnit" xsi:type="Property">
                        <source localId="457" locator="175:33-175:73" path="repeat" xsi:type="Property">
                           <source localId="456" locator="175:33-175:66" path="timing" xsi:type="Property">
                              <source localId="455" locator="175:33-175:59" xsi:type="Indexer">
                                 <operand localId="453" locator="175:33-175:56" path="dosageInstruction" scope="orders" xsi:type="Property"/>
                                 <operand localId="454" locator="175:58" valueType="t:Integer" value="0" xsi:type="Literal"/>
                              </source>
                           </source>
                        </source>
                     </source>
                  </operand>
               </expression>
            </let>
            <let localId="529" locator="176:7-179:46" identifier="dosesPerDay">
               <expression localId="528" locator="177:9-179:46" xsi:type="If">
                  <condition localId="521" locator="177:12-177:53" xsi:type="GreaterOrEqual">
                     <operand localId="519" locator="177:12-177:46" xsi:type="Divide">
                        <operand xsi:type="ToDecimal">
                           <operand localId="515" locator="177:13-177:21" name="frequency" xsi:type="QueryLetRef"/>
                        </operand>
                        <operand localId="518" locator="177:25-177:45" xsi:type="Multiply">
                           <operand localId="516" locator="177:26-177:31" name="period" xsi:type="QueryLetRef"/>
                           <operand localId="517" locator="177:35-177:44" name="periodDays" xsi:type="QueryLetRef"/>
                        </operand>
                     </operand>
                     <operand localId="520" locator="177:51-177:53" valueType="t:Decimal" value="1.0" xsi:type="Literal"/>
                  </condition>
                  <then localId="522" locator="178:14-178:16" valueType="t:Decimal" value="1.0" xsi:type="Literal"/>
                  <else localId="527" locator="179:14-179:46" xsi:type="Divide">
                     <operand xsi:type="ToDecimal">
                        <operand localId="523" locator="179:14-179:22" name="frequency" xsi:type="QueryLetRef"/>
                     </operand>
                     <operand localId="526" locator="179:26-179:46" xsi:type="Multiply">
                        <operand localId="524" locator="179:27-179:32" name="period" xsi:type="QueryLetRef"/>
                        <operand localId="525" locator="179:36-179:45" name="periodDays" xsi:type="QueryLetRef"/>
                     </operand>
                  </else>
               </expression>
            </let>
            <let localId="534" locator="180:7-180:65" identifier="repeat">
               <expression localId="533" locator="180:15-180:65" path="value" xsi:type="Property">
                  <source localId="532" locator="180:15-180:59" path="numberOfRepeatsAllowed" xsi:type="Property">
                     <source localId="531" locator="180:15-180:36" path="dispenseRequest" scope="orders" xsi:type="Property"/>
                  </source>
               </expression>
            </let>
            <let localId="645" locator="181:7-181:86" identifier="supplyDuration">
               <expression localId="644" locator="181:23-181:86" name="GetDurationInDays" xsi:type="FunctionRef">
                  <operand localId="537" locator="181:41-181:85" path="expectedSupplyDuration" xsi:type="Property">
                     <source localId="536" locator="181:41-181:62" path="dispenseRequest" scope="orders" xsi:type="Property"/>
                  </operand>
               </expression>
            </let>
            <let localId="653" locator="182:7-182:98" identifier="validityPeriod">
               <expression localId="652" locator="182:23-182:98" precision="Day" xsi:type="DurationBetween">
                  <operand localId="650" locator="182:36-182:86" path="value" xsi:type="Property">
                     <source localId="649" locator="182:36-182:80" path="start" xsi:type="Property">
                        <source localId="648" locator="182:36-182:72" path="validityPeriod" xsi:type="Property">
                           <source localId="647" locator="182:36-182:57" path="dispenseRequest" scope="orders" xsi:type="Property"/>
                        </source>
                     </source>
                  </operand>
                  <operand xsi:type="ToDateTime">
                     <operand localId="651" locator="182:92-182:98" xsi:type="Today"/>
                  </operand>
               </expression>
            </let>
            <let localId="670" locator="183:7-186:14" identifier="endDifference">
               <expression localId="669" locator="184:9-186:14" xsi:type="If">
                  <condition localId="660" locator="184:12-184:70" xsi:type="Less">
                     <operand localId="658" locator="184:12-184:60" path="value" xsi:type="Property">
                        <source localId="657" locator="184:12-184:54" path="end" xsi:type="Property">
                           <source localId="656" locator="184:12-184:48" path="validityPeriod" xsi:type="Property">
                              <source localId="655" locator="184:12-184:33" path="dispenseRequest" scope="orders" xsi:type="Property"/>
                           </source>
                        </source>
                     </operand>
                     <operand xsi:type="ToDateTime">
                        <operand localId="659" locator="184:64-184:70" xsi:type="Today"/>
                     </operand>
                  </condition>
                  <then localId="667" locator="185:14-185:87" precision="Day" xsi:type="DurationBetween">
                     <operand localId="665" locator="185:27-185:75" path="value" xsi:type="Property">
                        <source localId="664" locator="185:27-185:69" path="end" xsi:type="Property">
                           <source localId="663" locator="185:27-185:63" path="validityPeriod" xsi:type="Property">
                              <source localId="662" locator="185:27-185:48" path="dispenseRequest" scope="orders" xsi:type="Property"/>
                           </source>
                        </source>
                     </operand>
                     <operand xsi:type="ToDateTime">
                        <operand localId="666" locator="185:81-185:87" xsi:type="Today"/>
                     </operand>
                  </then>
                  <else localId="668" locator="186:14" valueType="t:Integer" value="0" xsi:type="Literal"/>
               </expression>
            </let>
            <return localId="691" locator="187:5-190:118">
               <expression localId="690" locator="188:7-190:118" xsi:type="If">
                  <condition localId="675" locator="188:10-188:54" xsi:type="Less">
                     <operand localId="673" locator="188:10-188:34" xsi:type="Multiply">
                        <operand xsi:type="ToDecimal">
                           <operand localId="671" locator="188:11-188:16" name="repeat" xsi:type="QueryLetRef"/>
                        </operand>
                        <operand localId="672" locator="188:20-188:33" name="supplyDuration" xsi:type="QueryLetRef"/>
                     </operand>
                     <operand xsi:type="ToDecimal">
                        <operand localId="674" locator="188:38-188:54" name="numDaysInDaysPast" xsi:type="OperandRef"/>
                     </operand>
                  </condition>
                  <then localId="676" locator="188:61-188:65" valueType="t:Boolean" value="false" xsi:type="Literal"/>
                  <else localId="689" locator="190:9-190:118" xsi:type="GreaterOrEqual">
                     <operand localId="687" locator="190:9-190:97" xsi:type="Multiply">
                        <operand localId="683" locator="190:10-190:67" xsi:type="Multiply">
                           <operand localId="677" locator="190:10-190:20" name="dosesPerDay" xsi:type="QueryLetRef"/>
                           <operand localId="682" locator="190:24-190:67" xsi:type="Divide">
                              <operand localId="680" locator="190:25-190:49" xsi:type="Multiply">
                                 <operand xsi:type="ToDecimal">
                                    <operand localId="678" locator="190:26-190:31" name="repeat" xsi:type="QueryLetRef"/>
                                 </operand>
                                 <operand localId="679" locator="190:35-190:48" name="supplyDuration" xsi:type="QueryLetRef"/>
                              </operand>
                              <operand xsi:type="ToDecimal">
                                 <operand localId="681" locator="190:53-190:66" name="validityPeriod" xsi:type="QueryLetRef"/>
                              </operand>
                           </operand>
                        </operand>
                        <operand xsi:type="ToDecimal">
                           <operand localId="686" locator="190:71-190:96" xsi:type="Subtract">
                              <operand localId="684" locator="190:72-190:79" name="daysPast" xsi:type="OperandRef"/>
                              <operand localId="685" locator="190:83-190:95" name="endDifference" xsi:type="QueryLetRef"/>
                           </operand>
                        </operand>
                     </operand>
                     <operand xsi:type="ToDecimal">
                        <operand localId="688" locator="190:102-190:118" name="numDaysInDaysPast" xsi:type="OperandRef"/>
                     </operand>
                  </else>
               </expression>
            </return>
         </expression>
         <operand name="Orders">
            <operandTypeSpecifier localId="429" locator="170:44-170:66" xsi:type="ListTypeSpecifier">
               <elementType localId="428" locator="170:49-170:65" name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
         <operand name="daysPast">
            <operandTypeSpecifier localId="430" locator="170:78-170:84" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
         </operand>
         <operand name="numDaysInDaysPast">
            <operandTypeSpecifier localId="431" locator="170:105-170:111" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="746" locator="192:1-201:5" name="GetPeriodDays" context="Unfiltered" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="746">
               <a:s>define function GetPeriodDays(value System.String):
  </a:s>
               <a:s r="745">
                  <a:s r="745">
                     <a:s>case
    </a:s>
                     <a:s r="698">
                        <a:s>when </a:s>
                        <a:s r="696">
                           <a:s r="694">
                              <a:s>value</a:s>
                           </a:s>
                           <a:s> = </a:s>
                           <a:s r="695">
                              <a:s>'a'</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="697"> then 365.0</a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="703">
                        <a:s>when </a:s>
                        <a:s r="701">
                           <a:s r="699">
                              <a:s>value</a:s>
                           </a:s>
                           <a:s> = </a:s>
                           <a:s r="700">
                              <a:s>'mo'</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="702"> then 30.0</a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="710">
                        <a:s>when </a:s>
                        <a:s r="706">
                           <a:s r="704">
                              <a:s>value</a:s>
                           </a:s>
                           <a:s> = </a:s>
                           <a:s r="705">
                              <a:s>'h'</a:s>
                           </a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="709">
                           <a:s r="707">1.0/24.0</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="719">
                        <a:s>when </a:s>
                        <a:s r="713">
                           <a:s r="711">
                              <a:s>value</a:s>
                           </a:s>
                           <a:s> = </a:s>
                           <a:s r="712">
                              <a:s>'min'</a:s>
                           </a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="718">
                           <a:s r="716">
                              <a:s r="714">1.0/24.0</a:s>
                           </a:s>
                           <a:s r="717">*60.0</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="730">
                        <a:s>when </a:s>
                        <a:s r="722">
                           <a:s r="720">
                              <a:s>value</a:s>
                           </a:s>
                           <a:s> = </a:s>
                           <a:s r="721">
                              <a:s>'s'</a:s>
                           </a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="729">
                           <a:s r="727">
                              <a:s r="725">
                                 <a:s r="723">1.0/24.0</a:s>
                              </a:s>
                              <a:s r="726">*60.0</a:s>
                           </a:s>
                           <a:s r="728">*60.0</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="743">
                        <a:s>when </a:s>
                        <a:s r="733">
                           <a:s r="731">
                              <a:s>value</a:s>
                           </a:s>
                           <a:s> = </a:s>
                           <a:s r="732">
                              <a:s>'ms'</a:s>
                           </a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="742">
                           <a:s r="740">
                              <a:s r="738">
                                 <a:s r="736">
                                    <a:s r="734">1.0/24.0</a:s>
                                 </a:s>
                                 <a:s r="737">*60.0</a:s>
                              </a:s>
                              <a:s r="739">*60.0</a:s>
                           </a:s>
                           <a:s r="741">*1000.0</a:s>
                        </a:s>
                     </a:s>
                     <a:s r="744">
    else 1.0
  end</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="745" locator="193:3-201:5" xsi:type="Case">
            <caseItem localId="698" locator="194:5-194:31">
               <when localId="696" locator="194:10-194:20" xsi:type="Equal">
                  <operand localId="694" locator="194:10-194:14" name="value" xsi:type="OperandRef"/>
                  <operand localId="695" locator="194:18-194:20" valueType="t:String" value="a" xsi:type="Literal"/>
               </when>
               <then localId="697" locator="194:27-194:31" valueType="t:Decimal" value="365.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="703" locator="195:5-195:31">
               <when localId="701" locator="195:10-195:21" xsi:type="Equal">
                  <operand localId="699" locator="195:10-195:14" name="value" xsi:type="OperandRef"/>
                  <operand localId="700" locator="195:18-195:21" valueType="t:String" value="mo" xsi:type="Literal"/>
               </when>
               <then localId="702" locator="195:28-195:31" valueType="t:Decimal" value="30.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="710" locator="196:5-196:34">
               <when localId="706" locator="196:10-196:20" xsi:type="Equal">
                  <operand localId="704" locator="196:10-196:14" name="value" xsi:type="OperandRef"/>
                  <operand localId="705" locator="196:18-196:20" valueType="t:String" value="h" xsi:type="Literal"/>
               </when>
               <then localId="709" locator="196:27-196:34" xsi:type="Divide">
                  <operand localId="707" locator="196:27-196:29" valueType="t:Decimal" value="1.0" xsi:type="Literal"/>
                  <operand localId="708" locator="196:31-196:34" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
               </then>
            </caseItem>
            <caseItem localId="719" locator="197:5-197:41">
               <when localId="713" locator="197:10-197:22" xsi:type="Equal">
                  <operand localId="711" locator="197:10-197:14" name="value" xsi:type="OperandRef"/>
                  <operand localId="712" locator="197:18-197:22" valueType="t:String" value="min" xsi:type="Literal"/>
               </when>
               <then localId="718" locator="197:29-197:41" xsi:type="Multiply">
                  <operand localId="716" locator="197:29-197:36" xsi:type="Divide">
                     <operand localId="714" locator="197:29-197:31" valueType="t:Decimal" value="1.0" xsi:type="Literal"/>
                     <operand localId="715" locator="197:33-197:36" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                  </operand>
                  <operand localId="717" locator="197:38-197:41" valueType="t:Decimal" value="60.0" xsi:type="Literal"/>
               </then>
            </caseItem>
            <caseItem localId="730" locator="198:5-198:44">
               <when localId="722" locator="198:10-198:20" xsi:type="Equal">
                  <operand localId="720" locator="198:10-198:14" name="value" xsi:type="OperandRef"/>
                  <operand localId="721" locator="198:18-198:20" valueType="t:String" value="s" xsi:type="Literal"/>
               </when>
               <then localId="729" locator="198:27-198:44" xsi:type="Multiply">
                  <operand localId="727" locator="198:27-198:39" xsi:type="Multiply">
                     <operand localId="725" locator="198:27-198:34" xsi:type="Divide">
                        <operand localId="723" locator="198:27-198:29" valueType="t:Decimal" value="1.0" xsi:type="Literal"/>
                        <operand localId="724" locator="198:31-198:34" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                     </operand>
                     <operand localId="726" locator="198:36-198:39" valueType="t:Decimal" value="60.0" xsi:type="Literal"/>
                  </operand>
                  <operand localId="728" locator="198:41-198:44" valueType="t:Decimal" value="60.0" xsi:type="Literal"/>
               </then>
            </caseItem>
            <caseItem localId="743" locator="199:5-199:52">
               <when localId="733" locator="199:10-199:21" xsi:type="Equal">
                  <operand localId="731" locator="199:10-199:14" name="value" xsi:type="OperandRef"/>
                  <operand localId="732" locator="199:18-199:21" valueType="t:String" value="ms" xsi:type="Literal"/>
               </when>
               <then localId="742" locator="199:28-199:52" xsi:type="Multiply">
                  <operand localId="740" locator="199:28-199:45" xsi:type="Multiply">
                     <operand localId="738" locator="199:28-199:40" xsi:type="Multiply">
                        <operand localId="736" locator="199:28-199:35" xsi:type="Divide">
                           <operand localId="734" locator="199:28-199:30" valueType="t:Decimal" value="1.0" xsi:type="Literal"/>
                           <operand localId="735" locator="199:32-199:35" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        </operand>
                        <operand localId="737" locator="199:37-199:40" valueType="t:Decimal" value="60.0" xsi:type="Literal"/>
                     </operand>
                     <operand localId="739" locator="199:42-199:45" valueType="t:Decimal" value="60.0" xsi:type="Literal"/>
                  </operand>
                  <operand localId="741" locator="199:47-199:52" valueType="t:Decimal" value="1000.0" xsi:type="Literal"/>
               </then>
            </caseItem>
            <else localId="744" locator="200:10-200:12" valueType="t:Decimal" value="1.0" xsi:type="Literal"/>
         </expression>
         <operand name="value">
            <operandTypeSpecifier localId="460" locator="192:37-192:49" name="t:String" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="852" locator="203:3-214:7" name="GetDurationInDays" context="Unfiltered" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="852">
               <a:s>define function GetDurationInDays(value FHIR.Duration):
    </a:s>
               <a:s r="851">
                  <a:s r="851">
                     <a:s>case
      </a:s>
                     <a:s r="757">
                        <a:s>when </a:s>
                        <a:s r="751">
                           <a:s>StartsWith(</a:s>
                           <a:s r="749">
                              <a:s r="748">
                                 <a:s r="747">
                                    <a:s>value</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="748">
                                    <a:s>unit</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="749">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s>, </a:s>
                           <a:s r="750">
                              <a:s>'a'</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="756">
                           <a:s r="754">
                              <a:s r="753">
                                 <a:s r="752">
                                    <a:s>value</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="753">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="754">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="755"> * 365.0</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="768">
                        <a:s>when </a:s>
                        <a:s r="762">
                           <a:s>StartsWith(</a:s>
                           <a:s r="760">
                              <a:s r="759">
                                 <a:s r="758">
                                    <a:s>value</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="759">
                                    <a:s>unit</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="760">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s>, </a:s>
                           <a:s r="761">
                              <a:s>'mo'</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="767">
                           <a:s r="765">
                              <a:s r="764">
                                 <a:s r="763">
                                    <a:s>value</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="764">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="765">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="766"> * 30.0</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="779">
                        <a:s>when </a:s>
                        <a:s r="773">
                           <a:s>StartsWith(</a:s>
                           <a:s r="771">
                              <a:s r="770">
                                 <a:s r="769">
                                    <a:s>value</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="770">
                                    <a:s>unit</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="771">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s>, </a:s>
                           <a:s r="772">
                              <a:s>'wk'</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="778">
                           <a:s r="776">
                              <a:s r="775">
                                 <a:s r="774">
                                    <a:s>value</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="775">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="776">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="777"> * 7.0</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="788">
                        <a:s>when </a:s>
                        <a:s r="784">
                           <a:s>StartsWith(</a:s>
                           <a:s r="782">
                              <a:s r="781">
                                 <a:s r="780">
                                    <a:s>value</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="781">
                                    <a:s>unit</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="782">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s>, </a:s>
                           <a:s r="783">
                              <a:s>'d'</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="787">
                           <a:s r="786">
                              <a:s r="785">
                                 <a:s>value</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="786">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="787">
                              <a:s>value</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="799">
                        <a:s>when </a:s>
                        <a:s r="793">
                           <a:s>StartsWith(</a:s>
                           <a:s r="791">
                              <a:s r="790">
                                 <a:s r="789">
                                    <a:s>value</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="790">
                                    <a:s>unit</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="791">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s>, </a:s>
                           <a:s r="792">
                              <a:s>'h'</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="798">
                           <a:s r="796">
                              <a:s r="795">
                                 <a:s r="794">
                                    <a:s>value</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="795">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="796">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="797"> / 24.0</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="812">
                        <a:s>when </a:s>
                        <a:s r="804">
                           <a:s>StartsWith(</a:s>
                           <a:s r="802">
                              <a:s r="801">
                                 <a:s r="800">
                                    <a:s>value</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="801">
                                    <a:s>unit</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="802">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s>, </a:s>
                           <a:s r="803">
                              <a:s>'min'</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="811">
                           <a:s r="809">
                              <a:s r="807">
                                 <a:s r="806">
                                    <a:s r="805">
                                       <a:s>value</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="806">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="807">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s r="808"> / 60.0</a:s>
                           </a:s>
                           <a:s r="810"> / 24.0</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="827">
                        <a:s>when </a:s>
                        <a:s r="817">
                           <a:s>StartsWith(</a:s>
                           <a:s r="815">
                              <a:s r="814">
                                 <a:s r="813">
                                    <a:s>value</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="814">
                                    <a:s>unit</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="815">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s>, </a:s>
                           <a:s r="816">
                              <a:s>'s'</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="826">
                           <a:s r="824">
                              <a:s r="822">
                                 <a:s r="820">
                                    <a:s r="819">
                                       <a:s r="818">
                                          <a:s>value</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="819">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="820">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s r="821"> / 60.0</a:s>
                              </a:s>
                              <a:s r="823"> / 60.0</a:s>
                           </a:s>
                           <a:s r="825"> / 24.0</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="844">
                        <a:s>when </a:s>
                        <a:s r="832">
                           <a:s>StartsWith(</a:s>
                           <a:s r="830">
                              <a:s r="829">
                                 <a:s r="828">
                                    <a:s>value</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="829">
                                    <a:s>unit</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="830">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s>, </a:s>
                           <a:s r="831">
                              <a:s>'ms'</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="843">
                           <a:s r="841">
                              <a:s r="839">
                                 <a:s r="837">
                                    <a:s r="835">
                                       <a:s r="834">
                                          <a:s r="833">
                                             <a:s>value</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="834">
                                             <a:s>value</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="835">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s r="836"> / 60.0</a:s>
                                 </a:s>
                                 <a:s r="838"> / 60.0</a:s>
                              </a:s>
                              <a:s r="840"> / 24.0</a:s>
                           </a:s>
                           <a:s r="842"> / 1000.0</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      else </a:s>
                     <a:s r="850">
                        <a:s r="845">Message(1000, true, </a:s>
                        <a:s r="847">
                           <a:s>'Undefined'</a:s>
                        </a:s>
                        <a:s>, </a:s>
                        <a:s r="848">
                           <a:s>'Error'</a:s>
                        </a:s>
                        <a:s>, </a:s>
                        <a:s r="849">
                           <a:s>'Unsupported duration unit'</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                     <a:s>
    end</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="851" locator="204:5-214:7" xsi:type="Case">
            <caseItem localId="757" locator="205:7-205:75">
               <when localId="751" locator="205:12-205:44" xsi:type="StartsWith">
                  <operand localId="749" locator="205:23-205:38" path="value" xsi:type="Property">
                     <source localId="748" locator="205:23-205:32" path="unit" xsi:type="Property">
                        <source localId="747" locator="205:23-205:27" name="value" xsi:type="OperandRef"/>
                     </source>
                  </operand>
                  <operand localId="750" locator="205:41-205:43" valueType="t:String" value="a" xsi:type="Literal"/>
               </when>
               <then localId="756" locator="205:51-205:75" xsi:type="Multiply">
                  <operand localId="754" locator="205:51-205:67" path="value" xsi:type="Property">
                     <source localId="753" locator="205:51-205:61" path="value" xsi:type="Property">
                        <source localId="752" locator="205:51-205:55" name="value" xsi:type="OperandRef"/>
                     </source>
                  </operand>
                  <operand localId="755" locator="205:71-205:75" valueType="t:Decimal" value="365.0" xsi:type="Literal"/>
               </then>
            </caseItem>
            <caseItem localId="768" locator="206:7-206:75">
               <when localId="762" locator="206:12-206:45" xsi:type="StartsWith">
                  <operand localId="760" locator="206:23-206:38" path="value" xsi:type="Property">
                     <source localId="759" locator="206:23-206:32" path="unit" xsi:type="Property">
                        <source localId="758" locator="206:23-206:27" name="value" xsi:type="OperandRef"/>
                     </source>
                  </operand>
                  <operand localId="761" locator="206:41-206:44" valueType="t:String" value="mo" xsi:type="Literal"/>
               </when>
               <then localId="767" locator="206:52-206:75" xsi:type="Multiply">
                  <operand localId="765" locator="206:52-206:68" path="value" xsi:type="Property">
                     <source localId="764" locator="206:52-206:62" path="value" xsi:type="Property">
                        <source localId="763" locator="206:52-206:56" name="value" xsi:type="OperandRef"/>
                     </source>
                  </operand>
                  <operand localId="766" locator="206:72-206:75" valueType="t:Decimal" value="30.0" xsi:type="Literal"/>
               </then>
            </caseItem>
            <caseItem localId="779" locator="207:7-207:74">
               <when localId="773" locator="207:12-207:45" xsi:type="StartsWith">
                  <operand localId="771" locator="207:23-207:38" path="value" xsi:type="Property">
                     <source localId="770" locator="207:23-207:32" path="unit" xsi:type="Property">
                        <source localId="769" locator="207:23-207:27" name="value" xsi:type="OperandRef"/>
                     </source>
                  </operand>
                  <operand localId="772" locator="207:41-207:44" valueType="t:String" value="wk" xsi:type="Literal"/>
               </when>
               <then localId="778" locator="207:52-207:74" xsi:type="Multiply">
                  <operand localId="776" locator="207:52-207:68" path="value" xsi:type="Property">
                     <source localId="775" locator="207:52-207:62" path="value" xsi:type="Property">
                        <source localId="774" locator="207:52-207:56" name="value" xsi:type="OperandRef"/>
                     </source>
                  </operand>
                  <operand localId="777" locator="207:72-207:74" valueType="t:Decimal" value="7.0" xsi:type="Literal"/>
               </then>
            </caseItem>
            <caseItem localId="788" locator="208:7-208:67">
               <when localId="784" locator="208:12-208:44" xsi:type="StartsWith">
                  <operand localId="782" locator="208:23-208:38" path="value" xsi:type="Property">
                     <source localId="781" locator="208:23-208:32" path="unit" xsi:type="Property">
                        <source localId="780" locator="208:23-208:27" name="value" xsi:type="OperandRef"/>
                     </source>
                  </operand>
                  <operand localId="783" locator="208:41-208:43" valueType="t:String" value="d" xsi:type="Literal"/>
               </when>
               <then localId="787" locator="208:51-208:67" path="value" xsi:type="Property">
                  <source localId="786" locator="208:51-208:61" path="value" xsi:type="Property">
                     <source localId="785" locator="208:51-208:55" name="value" xsi:type="OperandRef"/>
                  </source>
               </then>
            </caseItem>
            <caseItem localId="799" locator="209:7-209:74">
               <when localId="793" locator="209:12-209:44" xsi:type="StartsWith">
                  <operand localId="791" locator="209:23-209:38" path="value" xsi:type="Property">
                     <source localId="790" locator="209:23-209:32" path="unit" xsi:type="Property">
                        <source localId="789" locator="209:23-209:27" name="value" xsi:type="OperandRef"/>
                     </source>
                  </operand>
                  <operand localId="792" locator="209:41-209:43" valueType="t:String" value="h" xsi:type="Literal"/>
               </when>
               <then localId="798" locator="209:51-209:74" xsi:type="Divide">
                  <operand localId="796" locator="209:51-209:67" path="value" xsi:type="Property">
                     <source localId="795" locator="209:51-209:61" path="value" xsi:type="Property">
                        <source localId="794" locator="209:51-209:55" name="value" xsi:type="OperandRef"/>
                     </source>
                  </operand>
                  <operand localId="797" locator="209:71-209:74" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
               </then>
            </caseItem>
            <caseItem localId="812" locator="210:7-210:83">
               <when localId="804" locator="210:12-210:46" xsi:type="StartsWith">
                  <operand localId="802" locator="210:23-210:38" path="value" xsi:type="Property">
                     <source localId="801" locator="210:23-210:32" path="unit" xsi:type="Property">
                        <source localId="800" locator="210:23-210:27" name="value" xsi:type="OperandRef"/>
                     </source>
                  </operand>
                  <operand localId="803" locator="210:41-210:45" valueType="t:String" value="min" xsi:type="Literal"/>
               </when>
               <then localId="811" locator="210:53-210:83" xsi:type="Divide">
                  <operand localId="809" locator="210:53-210:76" xsi:type="Divide">
                     <operand localId="807" locator="210:53-210:69" path="value" xsi:type="Property">
                        <source localId="806" locator="210:53-210:63" path="value" xsi:type="Property">
                           <source localId="805" locator="210:53-210:57" name="value" xsi:type="OperandRef"/>
                        </source>
                     </operand>
                     <operand localId="808" locator="210:73-210:76" valueType="t:Decimal" value="60.0" xsi:type="Literal"/>
                  </operand>
                  <operand localId="810" locator="210:80-210:83" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
               </then>
            </caseItem>
            <caseItem localId="827" locator="211:7-211:88">
               <when localId="817" locator="211:12-211:44" xsi:type="StartsWith">
                  <operand localId="815" locator="211:23-211:38" path="value" xsi:type="Property">
                     <source localId="814" locator="211:23-211:32" path="unit" xsi:type="Property">
                        <source localId="813" locator="211:23-211:27" name="value" xsi:type="OperandRef"/>
                     </source>
                  </operand>
                  <operand localId="816" locator="211:41-211:43" valueType="t:String" value="s" xsi:type="Literal"/>
               </when>
               <then localId="826" locator="211:51-211:88" xsi:type="Divide">
                  <operand localId="824" locator="211:51-211:81" xsi:type="Divide">
                     <operand localId="822" locator="211:51-211:74" xsi:type="Divide">
                        <operand localId="820" locator="211:51-211:67" path="value" xsi:type="Property">
                           <source localId="819" locator="211:51-211:61" path="value" xsi:type="Property">
                              <source localId="818" locator="211:51-211:55" name="value" xsi:type="OperandRef"/>
                           </source>
                        </operand>
                        <operand localId="821" locator="211:71-211:74" valueType="t:Decimal" value="60.0" xsi:type="Literal"/>
                     </operand>
                     <operand localId="823" locator="211:78-211:81" valueType="t:Decimal" value="60.0" xsi:type="Literal"/>
                  </operand>
                  <operand localId="825" locator="211:85-211:88" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
               </then>
            </caseItem>
            <caseItem localId="844" locator="212:7-212:98">
               <when localId="832" locator="212:12-212:45" xsi:type="StartsWith">
                  <operand localId="830" locator="212:23-212:38" path="value" xsi:type="Property">
                     <source localId="829" locator="212:23-212:32" path="unit" xsi:type="Property">
                        <source localId="828" locator="212:23-212:27" name="value" xsi:type="OperandRef"/>
                     </source>
                  </operand>
                  <operand localId="831" locator="212:41-212:44" valueType="t:String" value="ms" xsi:type="Literal"/>
               </when>
               <then localId="843" locator="212:52-212:98" xsi:type="Divide">
                  <operand localId="841" locator="212:52-212:89" xsi:type="Divide">
                     <operand localId="839" locator="212:52-212:82" xsi:type="Divide">
                        <operand localId="837" locator="212:52-212:75" xsi:type="Divide">
                           <operand localId="835" locator="212:52-212:68" path="value" xsi:type="Property">
                              <source localId="834" locator="212:52-212:62" path="value" xsi:type="Property">
                                 <source localId="833" locator="212:52-212:56" name="value" xsi:type="OperandRef"/>
                              </source>
                           </operand>
                           <operand localId="836" locator="212:72-212:75" valueType="t:Decimal" value="60.0" xsi:type="Literal"/>
                        </operand>
                        <operand localId="838" locator="212:79-212:82" valueType="t:Decimal" value="60.0" xsi:type="Literal"/>
                     </operand>
                     <operand localId="840" locator="212:86-212:89" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                  </operand>
                  <operand localId="842" locator="212:93-212:98" valueType="t:Decimal" value="1000.0" xsi:type="Literal"/>
               </then>
            </caseItem>
            <else xsi:type="ToDecimal">
               <operand localId="850" locator="213:12-213:81" xsi:type="Message">
                  <source localId="845" locator="213:20-213:23" valueType="t:Integer" value="1000" xsi:type="Literal"/>
                  <condition localId="846" locator="213:26-213:29" valueType="t:Boolean" value="true" xsi:type="Literal"/>
                  <code localId="847" locator="213:32-213:42" valueType="t:String" value="Undefined" xsi:type="Literal"/>
                  <severity localId="848" locator="213:45-213:51" valueType="t:String" value="Error" xsi:type="Literal"/>
                  <message localId="849" locator="213:54-213:80" valueType="t:String" value="Unsupported duration unit" xsi:type="Literal"/>
               </operand>
            </else>
         </expression>
         <operand name="value">
            <operandTypeSpecifier localId="538" locator="203:43-203:55" name="fhir:Duration" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="858" locator="216:1-217:53" name="GetIngredient" context="Unfiltered" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="858">
               <a:s>define function GetIngredient(rxNormCode Code):
  </a:s>
               <a:s r="857">
                  <a:s r="857">
                     <a:s r="856">
                        <a:s r="854">
                           <a:s>OMTKLogic</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="856">
                           <a:s>GetIngredients(</a:s>
                           <a:s r="855">
                              <a:s>rxNormCode</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="857">
                        <a:s>ingredientName</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="857" locator="217:3-217:53" xsi:type="Query">
            <source alias="$this">
               <expression localId="856" locator="217:3-217:38" name="GetIngredients" libraryName="OMTKLogic" xsi:type="FunctionRef">
                  <operand localId="855" locator="217:28-217:37" name="rxNormCode" xsi:type="OperandRef"/>
               </expression>
            </source>
            <where xsi:type="Not">
               <operand xsi:type="IsNull">
                  <operand path="ingredientName" xsi:type="Property">
                     <source name="$this" xsi:type="AliasRef"/>
                  </operand>
               </operand>
            </where>
            <return distinct="false">
               <expression path="ingredientName" xsi:type="Property">
                  <source name="$this" xsi:type="AliasRef"/>
               </expression>
            </return>
         </expression>
         <operand name="rxNormCode">
            <operandTypeSpecifier localId="853" locator="216:42-216:45" name="t:Code" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="867" locator="219:1-220:43" name="GetIngredients" context="Unfiltered" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="867">
               <a:s>define function GetIngredients(rxNormCodes List&lt;Code>):
  </a:s>
               <a:s r="866">
                  <a:s r="866">
                     <a:s>
                        <a:s r="862">
                           <a:s r="861">
                              <a:s>
                                 <a:s>rxNormCodes</a:s>
                              </a:s>
                           </a:s>
                           <a:s> rnc</a:s>
                        </a:s>
                     </a:s>
                     <a:s> </a:s>
                     <a:s r="865">
                        <a:s>return </a:s>
                        <a:s r="864">
                           <a:s>GetIngredient(</a:s>
                           <a:s r="863">
                              <a:s>rnc</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="866" locator="220:3-220:43" xsi:type="Query">
            <source localId="862" locator="220:3-220:17" alias="rnc">
               <expression localId="861" locator="220:3-220:13" name="rxNormCodes" xsi:type="OperandRef"/>
            </source>
            <return localId="865" locator="220:19-220:43">
               <expression localId="864" locator="220:26-220:43" name="GetIngredient" xsi:type="FunctionRef">
                  <operand localId="863" locator="220:40-220:42" name="rnc" xsi:type="AliasRef"/>
               </expression>
            </return>
         </expression>
         <operand name="rxNormCodes">
            <operandTypeSpecifier localId="860" locator="219:44-219:53" xsi:type="ListTypeSpecifier">
               <elementType localId="859" locator="219:49-219:52" name="t:Code" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="892" locator="222:1-224:89" name="GetMedicationNames" context="Unfiltered" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="892">
               <a:s>define function GetMedicationNames(medications List&lt;MedicationRequest>):
  </a:s>
               <a:s r="891">
                  <a:s r="891">
                     <a:s>
                        <a:s r="871">
                           <a:s r="870">
                              <a:s>
                                 <a:s>medications</a:s>
                              </a:s>
                           </a:s>
                           <a:s> M</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="890">
                        <a:s>return </a:s>
                        <a:s r="889">
                           <a:s r="888">
                              <a:s r="887">
                                 <a:s r="872">
                                    <a:s>OMTKLogic</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="887">
                                    <a:s>GetIngredients(</a:s>
                                    <a:s r="886">
                                       <a:s>ToRxNormCode(</a:s>
                                       <a:s r="875">
                                          <a:s r="874">
                                             <a:s r="873">
                                                <a:s>M</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="874">
                                                <a:s>medication</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="875">
                                             <a:s>coding</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="888">
                                 <a:s>rxNormCode</a:s>
                              </a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="889">
                              <a:s>display</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="891" locator="223:3-224:89" xsi:type="Query">
            <source localId="871" locator="223:3-223:15" alias="M">
               <expression localId="870" locator="223:3-223:13" name="medications" xsi:type="OperandRef"/>
            </source>
            <return localId="890" locator="224:5-224:89">
               <expression localId="889" locator="224:12-224:89" xsi:type="Query">
                  <source alias="$this">
                     <expression localId="888" locator="224:12-224:81" xsi:type="Query">
                        <source alias="$this">
                           <expression localId="887" locator="224:12-224:70" name="GetIngredients" libraryName="OMTKLogic" xsi:type="FunctionRef">
                              <operand name="ToCode" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="886" locator="224:37-224:69" name="ToRxNormCode" xsi:type="FunctionRef">
                                    <operand localId="875" locator="224:50-224:68" path="coding" xsi:type="Property">
                                       <source localId="874" locator="224:50-224:61" path="medication" scope="M" xsi:type="Property"/>
                                    </operand>
                                 </operand>
                              </operand>
                           </expression>
                        </source>
                        <where xsi:type="Not">
                           <operand xsi:type="IsNull">
                              <operand path="rxNormCode" xsi:type="Property">
                                 <source name="$this" xsi:type="AliasRef"/>
                              </operand>
                           </operand>
                        </where>
                        <return distinct="false">
                           <expression path="rxNormCode" xsi:type="Property">
                              <source name="$this" xsi:type="AliasRef"/>
                           </expression>
                        </return>
                     </expression>
                  </source>
                  <where xsi:type="Not">
                     <operand xsi:type="IsNull">
                        <operand path="display" xsi:type="Property">
                           <source name="$this" xsi:type="AliasRef"/>
                        </operand>
                     </operand>
                  </where>
                  <return distinct="false">
                     <expression path="display" xsi:type="Property">
                        <source name="$this" xsi:type="AliasRef"/>
                     </expression>
                  </return>
               </expression>
            </return>
         </expression>
         <operand name="medications">
            <operandTypeSpecifier localId="869" locator="222:48-222:70" xsi:type="ListTypeSpecifier">
               <elementType localId="868" locator="222:53-222:69" name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="922" locator="241:1-244:3" name="ToRxNormCode" context="Unfiltered" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="922">
               <a:s>define function ToRxNormCode(coding List&lt;FHIR.Coding>):
  </a:s>
               <a:s r="921">
                  <a:s r="921">
                     <a:s>singleton from </a:s>
                     <a:s r="920">
                        <a:s>(
    </a:s>
                        <a:s r="920">
                           <a:s>
                              <a:s r="915">
                                 <a:s r="914">
                                    <a:s>
                                       <a:s>coding</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> C</a:s>
                              </a:s>
                           </a:s>
                           <a:s> </a:s>
                           <a:s r="919">
                              <a:s>where </a:s>
                              <a:s r="919">
                                 <a:s r="917">
                                    <a:s r="916">
                                       <a:s>C</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="917">
                                       <a:s>system</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> = </a:s>
                                 <a:s r="918">
                                    <a:s>'http://www.nlm.nih.gov/research/umls/rxnorm'</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  )</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="921" locator="242:3-244:3" xsi:type="SingletonFrom">
            <operand localId="920" locator="242:18-244:3" xsi:type="Query">
               <source localId="915" locator="243:5-243:12" alias="C">
                  <expression localId="914" locator="243:5-243:10" name="coding" xsi:type="OperandRef"/>
               </source>
               <where localId="919" locator="243:14-243:75" xsi:type="Equal">
                  <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="917" locator="243:20-243:27" path="system" scope="C" xsi:type="Property"/>
                  </operand>
                  <operand localId="918" locator="243:31-243:75" valueType="t:String" value="http://www.nlm.nih.gov/research/umls/rxnorm" xsi:type="Literal"/>
               </where>
            </operand>
         </expression>
         <operand name="coding">
            <operandTypeSpecifier localId="877" locator="241:37-241:53" xsi:type="ListTypeSpecifier">
               <elementType localId="876" locator="241:42-241:52" name="fhir:Coding" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
   </statements>
</library>
